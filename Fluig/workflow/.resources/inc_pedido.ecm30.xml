<list>
  <ProcessDefinition>
    <processDefinitionPK>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
    </processDefinitionPK>
    <processDescription>Inclusão de Pedido</processDescription>
    <instruction></instruction>
    <active>true</active>
    <publicProcess>false</publicProcess>
    <volumeId>Default</volumeId>
    <categoryId>Força de Vendas.Pedidos</categoryId>
    <managerEngineAllocationId>Papel</managerEngineAllocationId>
    <managerEngineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;admin&lt;/Role&gt;&lt;/AssignmentController&gt;</managerEngineAllocationConfiguration>
    <snapshotFrequency>0</snapshotFrequency>
    <baseDay>0</baseDay>
    <baseMonth>0</baseMonth>
    <periodId>Default</periodId>
    <uniqueCardVersion>false</uniqueCardVersion>
    <keyWord></keyWord>
    <complementsLevel>2</complementsLevel>
    <notifyRequisitionerComplements>true</notifyRequisitionerComplements>
    <notifyManagerComplements>false</notifyManagerComplements>
    <deadlineTime>0</deadlineTime>
    <warningDeadlineTime>0</warningDeadlineTime>
    <notifyAuthorityComplements>true</notifyAuthorityComplements>
  </ProcessDefinition>
  <ProcessDefinitionVersion>
    <processDefinitionVersionPK>
      <companyId>1</companyId>
      <processId>Inclusão de Pedido</processId>
      <version>129</version>
    </processDefinitionVersionPK>
    <versionDescription></versionDescription>
    <formId>49</formId>
    <editionMode>true</editionMode>
    <updateAttachmentsVersion>false</updateAttachmentsVersion>
    <controlsAttachmentsSecurity>false</controlsAttachmentsSecurity>
    <active>true</active>
    <blockedVersion>false</blockedVersion>
    <counterSign>false</counterSign>
    <openInstances>0</openInstances>
    <bpmnVersion>2</bpmnVersion>
    <processStates/>
    <favorito>false</favorito>
    <inheritFormSecurity>false</inheritFormSecurity>
    <mobileReady>true</mobileReady>
  </ProcessDefinitionVersion>
  <list>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>1</sequence>
      </processStatePK>
      <stateName>Início</stateName>
      <stateDescription>Início</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Papel</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;represetante&lt;/Role&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>true</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>130</positionX>
      <positionY>60</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>10</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>2</sequence>
      </processStatePK>
      <stateName>Integra Pedido Logix</stateName>
      <stateDescription>Integra Pedido Logix</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>790</positionX>
      <positionY>200</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>82</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>1</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>9</sequence>
      </processStatePK>
      <stateName>Erro Integraçao Pedido</stateName>
      <stateDescription>Erro Integraçao Pedido</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Pool Grupo</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Group&gt;Adm de Vendas&lt;/Group&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>640</positionX>
      <positionY>320</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>12</sequence>
      </processStatePK>
      <stateName>Envia Proforma</stateName>
      <stateDescription>Envia Proforma</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>false</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>0</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>960</positionX>
      <positionY>210</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>82</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>1</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>18</sequence>
      </processStatePK>
      <stateName>Erro Envio E-Mail</stateName>
      <stateDescription>Erro Envio E-Mail</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Pool Grupo</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Group&gt;Adm de Vendas&lt;/Group&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1100</positionX>
      <positionY>339</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>26</sequence>
      </processStatePK>
      <stateName>Aprovação Gerente Regional</stateName>
      <stateDescription>Aprovação Gerente Regional</stateDescription>
      <instruction></instruction>
      <deadlineTime>14400</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>resp_regional_repres</engineAllocationId>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1800</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>true</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>420</positionX>
      <positionY>460</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId>Geral</periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>30</sequence>
      </processStatePK>
      <stateName>Aprovação Gerente Nacional</stateName>
      <stateDescription>Aprovação Gerente Nacional</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>resp_nacional</engineAllocationId>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>true</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>790</positionX>
      <positionY>616</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>33</sequence>
      </processStatePK>
      <stateName>Revisão Representante</stateName>
      <stateDescription>Revisão Representante</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Executor Atividade</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;BaseActivity&gt;1&lt;/BaseActivity&gt;&lt;Returns&gt;First&lt;/Returns&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>430</positionX>
      <positionY>52</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>47</sequence>
      </processStatePK>
      <stateName>Integr. Auxiliar</stateName>
      <stateDescription>Integr. Auxiliar</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1090</positionX>
      <positionY>210</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>82</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>1</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>53</sequence>
      </processStatePK>
      <stateName>Aprovação Controller</stateName>
      <stateDescription>Aprovação Controller</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Papel</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;controller&lt;/Role&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1040</positionX>
      <positionY>770</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>true</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>59</sequence>
      </processStatePK>
      <stateName>Processa Dados Gerenciais</stateName>
      <stateDescription>Processa Dados Gerenciais</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>90</positionX>
      <positionY>188</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>82</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>1</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>64</sequence>
      </processStatePK>
      <stateName>Erro Dados Gerenciais</stateName>
      <stateDescription>Erro Dados Gerenciais</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Pool Grupo</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Group&gt;Adm de Vendas&lt;/Group&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>250</positionX>
      <positionY>195</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>76</sequence>
      </processStatePK>
      <stateName>Analise Administrativo de vendas</stateName>
      <stateDescription>Analise Administrativo de vendas</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Pool Grupo</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Group&gt;Adm de Vendas&lt;/Group&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>250</positionX>
      <positionY>332</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>79</sequence>
      </processStatePK>
      <stateName>Valida Valor Mínimo por Tipo de Cliente</stateName>
      <stateDescription>Valida Valor Mínimo por Tipo de Cliente</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>370</positionX>
      <positionY>170</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>82</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>1</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>89</sequence>
      </processStatePK>
      <stateName>Aprovação Gerente Nacional por Valor Mínimo</stateName>
      <stateDescription>Aprovação Gerente Nacional por Valor Mínimo</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Pool Papel</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;gerentenacional&lt;/Role&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>250</positionX>
      <positionY>600</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>8</sequence>
      </processStatePK>
      <stateName>Intermediário</stateName>
      <stateDescription>Intermediário</stateDescription>
      <instruction>Evento intermediário do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>890</positionX>
      <positionY>250</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>43</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <parentSequence>2</parentSequence>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>14</sequence>
      </processStatePK>
      <stateName>Intermediário</stateName>
      <stateDescription>Intermediário</stateDescription>
      <instruction>Evento intermediário do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1051</positionX>
      <positionY>250</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>43</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <parentSequence>12</parentSequence>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>51</sequence>
      </processStatePK>
      <stateName>Intermediário</stateName>
      <stateDescription>Intermediário</stateDescription>
      <instruction>Evento intermediário do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1170</positionX>
      <positionY>249</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>43</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <parentSequence>47</parentSequence>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>63</sequence>
      </processStatePK>
      <stateName>Intermediário</stateName>
      <stateDescription>Intermediário</stateDescription>
      <instruction>Evento intermediário do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>167</positionX>
      <positionY>190</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>43</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <parentSequence>59</parentSequence>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>80</sequence>
      </processStatePK>
      <stateName>Intermediário</stateName>
      <stateDescription>Intermediário</stateDescription>
      <instruction>Evento intermediário do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>1</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>380</positionX>
      <positionY>230</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>43</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <parentSequence>79</parentSequence>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>21</sequence>
      </processStatePK>
      <stateName>Aprov. Ger. Reg.?</stateName>
      <stateDescription>Aprov. Ger. Reg.?</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>120</positionX>
      <positionY>450</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>43</sequence>
      </processStatePK>
      <stateName>Aprov. Gerente Nac.?</stateName>
      <stateDescription>Aprov. Gerente Nac.?</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>560</positionX>
      <positionY>600</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>67</sequence>
      </processStatePK>
      <stateName>Aprov. Controler?</stateName>
      <stateDescription>Aprov. Controler?</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>810</positionX>
      <positionY>750</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>73</sequence>
      </processStatePK>
      <stateName>Tipo de Venda</stateName>
      <stateDescription>Tipo de Venda</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>110</positionX>
      <positionY>323</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>83</sequence>
      </processStatePK>
      <stateName>Tem Valor Mínimo?</stateName>
      <stateDescription>Tem Valor Mínimo?</stateDescription>
      <joint>false</joint>
      <initialState>false</initialState>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <automatic>true</automatic>
      <positionX>520</positionX>
      <positionY>170</positionY>
      <inhibitTransfer>false</inhibitTransfer>
      <stateType>1</stateType>
      <bpmnType>120</bpmnType>
      <signalId>0</signalId>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>16</sequence>
      </processStatePK>
      <stateName>Fim</stateName>
      <stateDescription>Fim</stateDescription>
      <instruction>Atividade final do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>true</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1300</positionX>
      <positionY>170</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>6</stateType>
      <bpmnType>60</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>38</sequence>
      </processStatePK>
      <stateName>Fim com cancelamento de processo</stateName>
      <stateDescription>Fim com cancelamento de processo</stateDescription>
      <instruction>Atividade final do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1270</positionX>
      <positionY>69</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>6</stateType>
      <bpmnType>65</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>41</sequence>
      </processStatePK>
      <stateName>Final com erro</stateName>
      <stateDescription>Final com erro</stateDescription>
      <instruction>Esta atividade indica que o processo foi terminado com erro.</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>1300</positionX>
      <positionY>212</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>6</stateType>
      <bpmnType>63</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
  </list>
  <list>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>0</expressionOrder>
        <version>129</version>
        <sequence>21</sequence>
      </conditionProcessStatePK>
      <condition>(( hAPI.getCardValue(&apos;ies_desc_medio_reg&apos;) == &apos;S&apos; ||&#xd;
hAPI.getCardValue(&apos;ies_alt_list_reg&apos;) == &apos;S&apos;||&#xd;
hAPI.getCardValue(&apos;ies_mix_geral_reg&apos;) == &apos;S&apos; ||&#xd;
hAPI.getCardValue(&apos;ies_desc_item_reg&apos;) == &apos;S&apos; ||&#xd;
hAPI.getCardValue(&apos;ies_pct_lob_reg&apos;) == &apos;S&apos;)&#xd;
&amp;&amp; hAPI.getCardValue(&apos;ies_orcamento&apos;) == &apos;N&apos;)</condition>
      <destinationSequenceId>26</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>2</expressionOrder>
        <version>129</version>
        <sequence>21</sequence>
      </conditionProcessStatePK>
      <condition>true</condition>
      <destinationSequenceId>67</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>1</expressionOrder>
        <version>129</version>
        <sequence>43</sequence>
      </conditionProcessStatePK>
      <condition>( hAPI.getCardValue(&apos;ies_desc_medio_nac&apos;) == &apos;S&apos; ||&#xd;
hAPI.getCardValue(&apos;ies_mix_geral_nac&apos;) == &apos;S&apos;  ||&#xd;
hAPI.getCardValue(&apos;ies_desc_item_nac&apos;) == &apos;S&apos; ||&#xd;
hAPI.getCardValue(&apos;ies_pct_lob_nac&apos;) == &apos;S&apos;)</condition>
      <destinationSequenceId>30</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>2</expressionOrder>
        <version>129</version>
        <sequence>43</sequence>
      </conditionProcessStatePK>
      <condition>true</condition>
      <destinationSequenceId>67</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>1</expressionOrder>
        <version>129</version>
        <sequence>67</sequence>
      </conditionProcessStatePK>
      <condition>( hAPI.getCardValue(&apos;ies_pct_lob_ctr&apos;) == &apos;S&apos; )</condition>
      <destinationSequenceId>53</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>2</expressionOrder>
        <version>129</version>
        <sequence>67</sequence>
      </conditionProcessStatePK>
      <condition>true</condition>
      <destinationSequenceId>2</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>1</expressionOrder>
        <version>129</version>
        <sequence>73</sequence>
      </conditionProcessStatePK>
      <condition>hAPI.getCardValue(&apos;tipo_venda&apos;) == &apos;8&apos; &amp;&amp;  ( hAPI.getCardValue(&apos;task&apos;) == &apos;0&apos; || hAPI.getCardValue(&apos;task&apos;) == &apos;1&apos;  || hAPI.getCardValue(&apos;task&apos;) == &apos;33&apos; )</condition>
      <destinationSequenceId>76</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>2</expressionOrder>
        <version>129</version>
        <sequence>73</sequence>
      </conditionProcessStatePK>
      <condition>true</condition>
      <destinationSequenceId>21</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>1</expressionOrder>
        <version>129</version>
        <sequence>83</sequence>
      </conditionProcessStatePK>
      <condition>hAPI.getCardValue(&apos;ies_aprova_min_tip_cliente&apos;) == &apos;S&apos; </condition>
      <destinationSequenceId>89</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
    <ConditionProcessState>
      <conditionProcessStatePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <expressionOrder>2</expressionOrder>
        <version>129</version>
        <sequence>83</sequence>
      </conditionProcessStatePK>
      <condition>true</condition>
      <destinationSequenceId>59</destinationSequenceId>
      <conditionType>0</conditionType>
    </ConditionProcessState>
  </list>
  <list>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>10</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>8</initialStateSequence>
      <finalStateSequence>9</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>11</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>9</initialStateSequence>
      <finalStateSequence>2</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>19</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>14</initialStateSequence>
      <finalStateSequence>18</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>20</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>18</initialStateSequence>
      <finalStateSequence>12</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>27</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>21</initialStateSequence>
      <finalStateSequence>26</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Necessita de aprovação do Gerente Regional</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>34</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>26</initialStateSequence>
      <finalStateSequence>33</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Revisar</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>35</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>30</initialStateSequence>
      <finalStateSequence>33</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Revisar</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>37</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>9</initialStateSequence>
      <finalStateSequence>33</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>39</linkSequence>
      </processLinkPK>
      <actionLabel>2 - cancelamento de processo.</actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>33</initialStateSequence>
      <finalStateSequence>38</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>42</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>18</initialStateSequence>
      <finalStateSequence>41</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>44</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>26</initialStateSequence>
      <finalStateSequence>43</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Aprovação Gerente Nacional</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>46</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>43</initialStateSequence>
      <finalStateSequence>30</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Sim</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>49</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>47</initialStateSequence>
      <finalStateSequence>16</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>50</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>12</initialStateSequence>
      <finalStateSequence>47</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>52</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>51</initialStateSequence>
      <finalStateSequence>41</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>55</linkSequence>
      </processLinkPK>
      <actionLabel>Aprovado</actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>53</initialStateSequence>
      <finalStateSequence>2</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Aprovado</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>56</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>53</initialStateSequence>
      <finalStateSequence>33</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Revisar</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>58</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>18</initialStateSequence>
      <finalStateSequence>47</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>62</linkSequence>
      </processLinkPK>
      <actionLabel>1- Aprov. Ger. Reg.?</actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>33</initialStateSequence>
      <finalStateSequence>59</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>65</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>63</initialStateSequence>
      <finalStateSequence>64</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>66</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>64</initialStateSequence>
      <finalStateSequence>59</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>68</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>43</initialStateSequence>
      <finalStateSequence>67</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Não</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>69</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>67</initialStateSequence>
      <finalStateSequence>53</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>70</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>30</initialStateSequence>
      <finalStateSequence>67</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Aprovado</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>71</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>21</initialStateSequence>
      <finalStateSequence>67</finalStateSequence>
      <returnLabel></returnLabel>
      <name>Não necessita de aprovação do Gerente Regional</name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>72</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>67</initialStateSequence>
      <finalStateSequence>2</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>74</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>59</initialStateSequence>
      <finalStateSequence>73</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>75</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>73</initialStateSequence>
      <finalStateSequence>21</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>77</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>73</initialStateSequence>
      <finalStateSequence>76</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>78</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>76</initialStateSequence>
      <finalStateSequence>59</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>81</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>80</initialStateSequence>
      <finalStateSequence>64</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>82</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>64</initialStateSequence>
      <finalStateSequence>79</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>84</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>79</initialStateSequence>
      <finalStateSequence>83</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>86</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>83</initialStateSequence>
      <finalStateSequence>59</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>88</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>1</initialStateSequence>
      <finalStateSequence>79</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>90</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>83</initialStateSequence>
      <finalStateSequence>89</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>91</linkSequence>
      </processLinkPK>
      <actionLabel>1 - Aprovar</actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>89</initialStateSequence>
      <finalStateSequence>59</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>92</linkSequence>
      </processLinkPK>
      <actionLabel>2 - Reprovar</actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>89</initialStateSequence>
      <finalStateSequence>33</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <linkSequence>93</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>2</initialStateSequence>
      <finalStateSequence>12</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
  </list>
  <list/>
  <list>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>afterTaskComplete</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function afterTaskComplete(colleagueId,nextSequenceId,userList){&#xd;
	&#xd;
	var task = getValue(&apos;WKNumState&apos;);&#xd;
	var processo = getValue(&apos;WKDef&apos;);&#xd;
	var numProcess = getValue(&quot;WKNumProces&quot;);&#xd;
	var user = getValue(&quot;WKUser&quot;);&#xd;
    &#xd;
	if ( getValue(&quot;WKCompletTask&quot;) &amp;&amp; ( task == 1 || task == 33 ) ){&#xd;
		var comentario = &apos; Desconto Médio: &apos;+getValueFormFloat(&apos;desc_medio&apos;)+&apos; - MIX: &apos;+getValueFormFloat(&apos;mix_geral&apos;) ;&#xd;
		setComment( user, numProcess, comentario );&#xd;
	}&#xd;
&#xd;
	function setComment( user, processo, comentario ){&#xd;
		 var constraints = new Array();&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;processo&apos;, processo, processo, ConstraintType.MUST) );&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;user&apos;, user, user, ConstraintType.MUST) );&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;comentario&apos;, comentario, comentario, ConstraintType.MUST) );&#xd;
	    var dataset = DatasetFactory.getDataset( &apos;setComent&apos;, null, constraints, null);&#xd;
		if ( dataset != null ){&#xd;
			return dataset.getValue(0, &apos;retorno&apos; );&#xd;
		}&#xd;
	}	&#xd;
		&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>servicetask59</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function servicetask59(attempt, message) {&#xd;
	&#xd;
	hAPI.setCardValue(&quot;obs_ger_reg&quot;,&quot;&quot;);&#xd;
	hAPI.setCardValue(&quot;obs_ger_nac&quot;,&quot;&quot;);&#xd;
	hAPI.setCardValue(&quot;obs_ctr&quot;,&quot;&quot;);&#xd;
	&#xd;
&#xd;
	var codEmpresa = getValueForm(&quot;empresa&quot;,&quot;10&quot;);&#xd;
	var codCliente = getValueForm(&quot;cod_cliente&quot;,&quot;&quot;);&#xd;
	var natOper = getValueForm(&quot;nat_operacao&quot;,&quot;&quot;);&#xd;
	var uf = getValueForm(&quot;estado_ent&quot;,&quot;&quot;);&#xd;
	var carteira = getValueForm(&quot;cod_tip_carteira_cli&quot;,&quot;01&quot;);	&#xd;
	var codRepres = getValueForm(&quot;cod_repres&quot;, &quot;&quot;);&#xd;
	var codTipCli = getValueForm(&quot;cod_tip_cli&quot;, &quot;&quot;);&#xd;
	var codCondPgto = getValueForm(&quot;cond_pagamento&quot;, &quot;&quot;);&#xd;
	&#xd;
	var p_desc_finac = getValueFormFloat(&quot;pct_desc_financ&quot;, &quot;0&quot;);&#xd;
&#xd;
	if( !loadRepres( codRepres ) ){&#xd;
		throw &quot;Erro ao recuperar dados do representate&quot;;&#xd;
	}&#xd;
&#xd;
	var itens = new Array();&#xd;
	&#xd;
	var insEstadual = getValueForm(&quot;ins_estadual&quot;, &quot;&quot;).replace(&quot;[^0-9]&quot;, &quot;&quot;).trim();&#xd;
	log.info(&quot;## INSCRICAO ## &quot; + insEstadual);&#xd;
	var finalidade = &quot;1&quot;;&#xd;
	log.info(&quot;## FINALIDADE ## 0001&quot;);&#xd;
	if (insEstadual == &quot;&quot; || insEstadual == null || insEstadual == &quot;ISENTO&quot;) {&#xd;
		finalidade = &quot;2&quot;;&#xd;
		log.info(&quot;## FINALIDADE ## 0002&quot;);&#xd;
	} else if ((getValueForm(&quot;cod_class&quot;, &quot;A&quot;) == &quot;U&quot; || getValueForm(&#xd;
			&quot;cod_class&quot;, &quot;A&quot;) == &quot;u&quot;)&#xd;
			&amp;&amp; (insEstadual != &quot;&quot; || insEstadual != null || insEstadual != &quot;ISENTO&quot;)) {&#xd;
		finalidade = &quot;3&quot;;&#xd;
		log.info(&quot;## FINALIDADE ## 0003&quot;);&#xd;
	}	&#xd;
	&#xd;
	var ies_mix_geral_reg = &apos;N&apos;;&#xd;
	var ies_mix_geral_nac = &apos;N&apos;;&#xd;
	var ies_desc_medio_reg = &apos;N&apos;;&#xd;
	var ies_desc_medio_nac = &apos;N&apos;;&#xd;
	var ies_desc_item_reg = &apos;N&apos;;&#xd;
	var ies_desc_item_nac = &apos;N&apos;;&#xd;
	var ies_pct_lob_reg = &apos;N&apos;;&#xd;
	var ies_pct_lob_nac = &apos;N&apos;;&#xd;
	var ies_pct_lob_ctr = &apos;N&apos;;	&#xd;
	var ies_alt_list_reg = &apos;N&apos;;&#xd;
		&#xd;
	var pct_custo_ger = 0;&#xd;
	var ies_mix = &apos;&apos;;&#xd;
	var ies_desc_ped = &apos;&apos;;&#xd;
	var ies_desc_item = &apos;&apos;;&#xd;
	var ies_lob = &apos;&apos;;&#xd;
	var ies_aprov_list = &apos;&apos;;&#xd;
	&#xd;
	var lob = 0;&#xd;
    var p_lob = 0;&#xd;
	var lob3 = 0;&#xd;
    var p_lob3 = 0;     &#xd;
	 &#xd;
    // ### Recupera paramentros da empresa.&#xd;
	var c1 = DatasetFactory.createConstraint(&quot;cod_empresa&quot;, codEmpresa, codEmpresa, ConstraintType.MUST);&#xd;
	var constraints = new Array(c1);&#xd;
	var dataset = DatasetFactory.getDataset(&apos;empresa_compl&apos;, null, constraints, null);&#xd;
		 &#xd;
	if (dataset != null) {&#xd;
		pct_custo_ger = parseFloat( dataset.getValue(0, &quot;pct_custo_ger&quot;) );&#xd;
		ies_mix = dataset.getValue(0, &quot;ies_prov_mix&quot;);&#xd;
		ies_desc_ped = dataset.getValue(0, &quot;ies_prov_desc_ped&quot;);&#xd;
		ies_desc_item = dataset.getValue(0, &quot;ies_prov_desc_item&quot;);&#xd;
		ies_lob = dataset.getValue(0, &quot;ies_prov_lob&quot;);&#xd;
		ies_aprov_list = dataset.getValue(0, &quot;ies_aprov_list&quot;);&#xd;
	}&#xd;
	&#xd;
	pct_custo_ger = isNull(pct_custo_ger,0);&#xd;
		&#xd;
	var dfs = java.text.DecimalFormatSymbols();&#xd;
	dfs.setDecimalSeparator(&apos;,&apos;);&#xd;
	dfs.setPerMill(&apos;.&apos;);&#xd;
	df2 = new java.text.DecimalFormat(&quot;0.00&quot;,dfs);&#xd;
	&#xd;
	// busca percentual de lob minimo para novos clientes e se eh o primeiro&#xd;
	// pedido&#xd;
	var perc_minimo_lob;&#xd;
	var prim_pedido;&#xd;
	&#xd;
	// log.info(&apos;tipo_frete_logix &apos;);&#xd;
	var SQL1 = &quot; select nvl(caracter_integr,0) as perc_min from vdp_dpara_geral where sistema_integr=&apos;LOB_NOVOS_CLI&apos; &quot; +&#xd;
            &quot;	and caracter_logix = &apos;&quot;+ codEmpresa +&quot;&apos; &quot;;&#xd;
		&#xd;
	 var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
	 var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL1, SQL1, ConstraintType.MUST);&#xd;
	 var constraints = new Array(c1,c2);&#xd;
	 var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
	 &#xd;
	 if (dataset != null) {&#xd;
		 log.info(&apos;DATA SET...&apos;+dataset );&#xd;
		 perc_minimo_lob = parseFloat(dataset.getValue(0, &quot;perc_min&quot;));&#xd;
	 }else{&#xd;
		 perc_minimo_lob = parseFloat(0);&#xd;
	 }&#xd;
	 log.info(&apos;percentual_min_lob...&apos;+perc_minimo_lob);&#xd;
	 &#xd;
	 var SQL2 = &quot; select case when count(*) &gt; 0 then &apos;N&apos; else &apos;S&apos; end as prim_pedido from pedidos  &quot; +&#xd;
	 			&quot; where cod_cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
	 log.info(&apos;SQL21&apos;+SQL2);&#xd;
	 var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
	 var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL2, SQL2, ConstraintType.MUST);&#xd;
	 var constraints = new Array(c1,c2);&#xd;
	 var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
	 log.info(&apos;SQL22&apos;+SQL2);&#xd;
	 &#xd;
	 if (dataset != null) {&#xd;
		 log.info(&apos;DATA SET...&apos;+dataset );&#xd;
		 prim_pedido = dataset.getValue(0, &quot;prim_pedido&quot;);&#xd;
	 }else{&#xd;
		 prim_pedido = &apos;N&apos;;&#xd;
	 }&#xd;
	 log.info(&apos;percentual_min_lob...&apos;+perc_minimo_lob);&#xd;
	 log.info(&apos;primeiro_pedido...&apos;+prim_pedido);&#xd;
	&#xd;
	// fim busca percentual de lob minimo para novos clientes e se eh o primeiro&#xd;
	// pedido&#xd;
	&#xd;
	// ////#### F R E T E #####&#xd;
	var numProcesso = getValue(&apos;WKNumProces&apos;);&#xd;
	var userId = getValue(&quot;WKUser&quot;); &#xd;
	var frete_total = 0 ;&#xd;
	var peso_total = getValueFormFloat( &quot;peso_total_geral&quot;, &quot;0&quot; );&#xd;
	var cod_cidade_ent = getValueForm( &apos;cod_cidade_ent&apos;, &apos;0&apos; );&#xd;
	log.info( &apos;peso_total.........&apos;+peso_total );&#xd;
	var valor_total = getValueFormFloat( &quot;valor_total_real&quot;, &quot;0&quot; );&#xd;
	var cub_total = getValueFormFloat( &quot;cubagem_total_geral&quot;, &quot;0&quot; );&#xd;
	var cod_transp = getValueForm(&apos;cod_trans&apos;,&apos;X&apos;);&#xd;
	&#xd;
	log.info(&apos;peso_total D-. &apos;+peso_total+&quot; SRT &quot;+getValueForm( &quot;peso_total_geral&quot;, &quot;0&quot; ));&#xd;
	&#xd;
	var i = 0;&#xd;
	if( peso_total == 0 || peso_total == undefined || peso_total == null || peso_total == &quot;&quot;  ){&#xd;
		&#xd;
		peso_total = 0;&#xd;
		&#xd;
		var camposItem = hAPI.getCardData(getValue(&quot;WKNumProces&quot;));&#xd;
		var contadorItem = camposItem.keySet().iterator();&#xd;
		log.info(&apos;Antes While. &apos; + camposItem);&#xd;
		log.info(&apos;Antes While..... &apos; + contadorItem.hasNext());	 &#xd;
		&#xd;
		while (contadorItem.hasNext()) {&#xd;
			var idItem = contadorItem.next();		&#xd;
			if( idItem.indexOf(&quot;___&quot;) == -1 ){&#xd;
				continue;&#xd;
			}&#xd;
			//log.info(&apos;Campo. &apos; + idItem);&#xd;
			var campo = idItem.split(&apos;___&apos;)[0];&#xd;
			var seqItem = &apos;0&apos;;&#xd;
			seqItem = idItem.split(&apos;___&apos;)[1];&#xd;
			//log.info(&apos;Seq. &apos; + seqItem);&#xd;
			if( seqItem != 0 &amp;&amp; seqItem != undefined &amp;&amp; campo == &quot;COD_ITEM&quot; ) {&#xd;
				i += 1;&#xd;
				&#xd;
				var item = {};&#xd;
							&#xd;
				var qtd = getValueFormFloat(&quot;quantidade___&quot; + seqItem, &quot;0&quot;);&#xd;
				var peso = getValueFormFloat(&quot;peso___&quot; + seqItem, &quot;0&quot;);&#xd;
				&#xd;
				peso_total += qtd * peso;  &#xd;
				&#xd;
			}&#xd;
		}&#xd;
		hAPI.setCardValue(&quot;peso_total_geral&quot;, df2.format( peso_total ) );&#xd;
	}&#xd;
	log.info(&apos;peso_total D+. &apos;+peso_total);&#xd;
	if( getValueForm(&apos;tipo_frete_logix&apos;,&apos;X&apos;) == &apos;1&apos; ){&#xd;
		&#xd;
		log.info(&apos;tipo_frete_logix &apos;);&#xd;
		log.info(&apos;cod_cidade_ent &apos;+cod_cidade_ent);&#xd;
		/*if (cod_cidade_ent != null &amp;&amp; cod_cidade_ent != 0 ) {&#xd;
			var SQL = &quot; select nvl( EIS_F_GET_VLR_FRETE_EMBARCADOR( emp.cod_empresa, &quot;+  &#xd;
			&quot;											clie.cod_cidade, &quot;+ &#xd;
            &quot;											&apos;&quot;+ cod_cidade_ent +&quot;&apos;,&quot;+ &#xd;
            &quot;											pe.parametro_ind, &quot;+ &#xd;
            &quot;											&quot;+ peso_total +&quot;, &quot;+ &#xd;
            &quot;                          					trunc(sysdate), 0 ), 0) as frete_cif &quot;+&#xd;
            &quot;    FROM empresa emp &quot;+ &#xd;
            &quot;	 join clientes clie on (clie.cod_cliente = emp.cod_cliente) &quot;+&#xd;
            &quot;	 join clientes cli on (1=1) &quot;+&#xd;
            &quot;	 left join omc_par_emitente pe on ( pe.emitente = cli.cod_cliente &quot;+&#xd;
            &quot;                     				and pe.parametro = &apos;nivel_servico&apos; ) &quot;+&#xd;
            &quot;	where emp.cod_empresa = &apos;&quot;+ codEmpresa +&quot;&apos; &quot;+&#xd;
            &quot;	  and cli.cod_cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
			&#xd;
		} else {&#xd;
		var SQL = &quot; select nvl( EIS_F_GET_VLR_FRETE_EMBARCADOR( emp.cod_empresa, &quot;+  &#xd;
				&quot;											clie.cod_cidade, &quot;+ &#xd;
	            &quot;											cli.cod_cidade, &quot;+ &#xd;
	            &quot;											pe.parametro_ind, &quot;+ &#xd;
	            &quot;											&quot;+ peso_total +&quot;, &quot;+ &#xd;
	            &quot;                          					trunc(sysdate), 0 ), 0) as frete_cif &quot;+&#xd;
	            &quot;    FROM empresa emp &quot;+ &#xd;
	            &quot;	 join clientes clie on (clie.cod_cliente = emp.cod_cliente) &quot;+&#xd;
	            &quot;	 join clientes cli on (1=1) &quot;+&#xd;
	            &quot;	 left join omc_par_emitente pe on ( pe.emitente = cli.cod_cliente &quot;+&#xd;
	            &quot;                     				and pe.parametro = &apos;nivel_servico&apos; ) &quot;+&#xd;
	            &quot;	where emp.cod_empresa = &apos;&quot;+ codEmpresa +&quot;&apos; &quot;+&#xd;
	            &quot;	  and cli.cod_cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
		}*/&#xd;
		if (cod_cidade_ent != null &amp;&amp; cod_cidade_ent != 0 ) {&#xd;
			var SQL = &quot; select nvl( eis_f_get_valor_tabela_frete( emp.cod_empresa, &quot;+ //empresa&#xd;
					&quot;&apos;&quot;+cod_transp+&quot;&apos;,&quot;+ //cod_transportadora&#xd;
			&quot;											clie.cod_cidade, &quot;+ //cod cidade origem&#xd;
			&quot;&apos;&quot;+codCliente+&quot;&apos;,&quot;+ //cod_cliente&#xd;
            &quot;											&apos;&quot;+ cod_cidade_ent +&quot;&apos;,&quot;+ //cod cidade destino &#xd;
            &quot;											pe.parametro_ind, &quot;+ //nivel&#xd;
            &quot;0,&quot; + //quantidade&#xd;
            &quot;											&quot;+ peso_total +&quot;, &quot;+ //peso liquido&#xd;
            &quot;											&quot;+ peso_total +&quot;, &quot;+  //peso item&#xd;
            cub_total+&quot;,&quot; + //peso cubado&#xd;
            valor_total+&quot;,&quot;+ //valortotal mercadoria&#xd;
            valor_total+&quot;,&quot;+ //valortotal &#xd;
            &quot;0,&quot; + //total km&#xd;
            &quot;0,&quot; + //qtd descarga&#xd;
            &quot;&apos;N&apos;,&quot;+&#xd;
            &#xd;
            &quot; &apos;N&apos; ), 0) as frete_cif &quot;+&#xd;
            &quot;    FROM empresa emp &quot;+ &#xd;
            &quot;	 join clientes clie on (clie.cod_cliente = emp.cod_cliente) &quot;+&#xd;
            &quot;	 join clientes cli on (1=1) &quot;+&#xd;
            &quot;	 left join omc_par_emitente pe on ( pe.emitente = cli.cod_cliente &quot;+&#xd;
            &quot;                     				and pe.parametro = &apos;nivel_servico&apos; ) &quot;+&#xd;
            &quot;	where emp.cod_empresa = &apos;&quot;+ codEmpresa +&quot;&apos; &quot;+&#xd;
            &quot;	  and cli.cod_cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
			&#xd;
		} else {&#xd;
			var SQL = &quot; select nvl( eis_f_get_valor_tabela_frete( emp.cod_empresa, &quot;+ //empresa&#xd;
					&quot;&apos;&quot;+cod_transp+&quot;&apos;,&quot;+ //cod_transportadora&#xd;
					&quot;											clie.cod_cidade, &quot;+ //cod cidade origem&#xd;
					&quot;&apos;&quot;+codCliente+&quot;&apos;,&quot;+ //cod_cliente&#xd;
				    &quot;cli.cod_cidade,&quot;+ //cod cidade destino &#xd;
				    &quot;											pe.parametro_ind, &quot;+ //nivel&#xd;
				    &quot;0,&quot; + //quantidade&#xd;
				    &quot;											&quot;+ peso_total +&quot;, &quot;+ //peso liquido&#xd;
				    &quot;											&quot;+ peso_total +&quot;, &quot;+  //peso item&#xd;
				    cub_total+&quot;,&quot; + //peso cubado&#xd;
		            valor_total+&quot;,&quot;+ //valortotal mercadoria&#xd;
		            valor_total+&quot;,&quot;+ //valortotal &#xd;
				    &quot;0,&quot; + //total km&#xd;
				    &quot;0,&quot; + //qtd descarga&#xd;
				    &quot;&apos;N&apos;,&quot;+&#xd;
				    &#xd;
				    &quot; &apos;N&apos; ), 0) as frete_cif &quot;+&#xd;
				    &quot;    FROM empresa emp &quot;+ &#xd;
				    &quot;	 join clientes clie on (clie.cod_cliente = emp.cod_cliente) &quot;+&#xd;
				    &quot;	 join clientes cli on (1=1) &quot;+&#xd;
				    &quot;	 left join omc_par_emitente pe on ( pe.emitente = cli.cod_cliente &quot;+&#xd;
				    &quot;                     				and pe.parametro = &apos;nivel_servico&apos; ) &quot;+&#xd;
				    &quot;	where emp.cod_empresa = &apos;&quot;+ codEmpresa +&quot;&apos; &quot;+&#xd;
				    &quot;	  and cli.cod_cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
		}&#xd;
		&#xd;
         log.info(&apos;SQL FRETE... &apos;+SQL); &#xd;
		 var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
		 var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL, SQL, ConstraintType.MUST);&#xd;
		 var constraints = new Array(c1,c2);&#xd;
		 var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
		 &#xd;
		 if (dataset != null &amp;&amp; (parseFloat( dataset.getValue(0, &quot;frete_cif&quot;)))!= 0 ) {&#xd;
			 log.info(&apos;DATA SET...&apos;+dataset );&#xd;
			 hAPI.setCardValue(&quot;frete&quot;, df2.format( parseFloat( dataset.getValue(0, &quot;frete_cif&quot;) ) ) );&#xd;
			 frete_total = parseFloat( dataset.getValue(0, &quot;frete_cif&quot;) );&#xd;
		 }else{&#xd;
			 log.info(&apos;ENTROU NO FRETE ZERO&apos;);&#xd;
			 hAPI.setCardValue(&quot;frete&quot;, &quot;0,00&quot; );&#xd;
			 //tratativa para devolver ao comercial para analise quando o tipo de frete for CIF e não tiver valor&#xd;
			 try{&#xd;
				 throw &quot;Atencao: O tipo de Frete selecionado é CIF e não foi possível calcular o valor de Frete a partir das tabelas do TMS!&quot;;&#xd;
			 } catch (e){&#xd;
				 hAPI.setTaskComments(userId, numProcesso, 0, &quot;Atencao: O tipo de Frete selecionado é CIF e não foi possível calcular o valor de Frete a partir das tabelas do TMS!&quot;);	 &#xd;
				 throw &quot;Atencao: O tipo de Frete selecionado é CIF e não foi possível calcular o valor de Frete a partir das tabelas do TMS!&quot;;&#xd;
			 }&#xd;
			 //fim tratativa para devolver ao comercial para analise quando o tipo de frete for CIF e não tiver valor&#xd;
		 }		 &#xd;
	}else{&#xd;
		hAPI.setCardValue(&quot;frete&quot;, &quot;0,00&quot; );&#xd;
	}&#xd;
    // ######### F I M F R E T E #######&#xd;
	&#xd;
	 var custo_total = 0;&#xd;
	 var icms_total = 0;&#xd;
	 var pis_total = 0;&#xd;
	 var cofins_total = 0;&#xd;
	 var comis_total = 0;&#xd;
	 &#xd;
	 var ipi_total = 0;	 &#xd;
	 var st_total = 0;&#xd;
	 &#xd;
	 var acordo_total = 0;&#xd;
	 var verba_total = 0;&#xd;
	 var custo_trans_total = 0;&#xd;
&#xd;
	var camposItem = hAPI.getCardData(getValue(&quot;WKNumProces&quot;));&#xd;
	var contadorItem = camposItem.keySet().iterator();&#xd;
	log.info(&apos;Antes While. &apos; + camposItem);&#xd;
	log.info(&apos;Antes While..... &apos; + contadorItem.hasNext());	 &#xd;
	&#xd;
	var i = 0;&#xd;
	&#xd;
	var cotacao = 1;&#xd;
	if( getValueForm(&quot;moeda&quot;, &quot;&quot;) != &quot;1&quot; &#xd;
	  &amp;&amp; getValueForm(&quot;cotacao&quot;, &quot;&quot;) != &quot;&quot;&#xd;
	  &amp;&amp; getValueFormFloat(&quot;cotacao&quot;, &quot;0&quot;) ){&#xd;
		cotacao = getValueFormFloat(&quot;cotacao&quot;, &quot;0&quot;);&#xd;
	}&#xd;
	&#xd;
	&#xd;
	while (contadorItem.hasNext()) {&#xd;
		var idItem = contadorItem.next();		&#xd;
		if( idItem.indexOf(&quot;___&quot;) == -1 ){&#xd;
			continue;&#xd;
		}&#xd;
		//log.info(&apos;Campo. &apos; + idItem);&#xd;
		var campo = idItem.split(&apos;___&apos;)[0];&#xd;
		var seqItem = &apos;0&apos;;&#xd;
		seqItem = idItem.split(&apos;___&apos;)[1];&#xd;
		//log.info(&apos;Seq. &apos; + seqItem);&#xd;
		if( seqItem != 0 &amp;&amp; seqItem != undefined &amp;&amp; campo == &quot;COD_ITEM&quot; ) {&#xd;
			i += 1;&#xd;
			&#xd;
			var item = {};&#xd;
						&#xd;
			log.info(&apos;Sequencia.....&apos; + seqItem + &apos; - &apos; + i );&#xd;
			var codItem = getValueForm(&quot;cod_item___&quot; + seqItem, &quot;&quot;) + &quot;&quot;;&#xd;
			log.info( &apos;valor......................... &apos;+getValueForm(&quot;valor_total___&quot; + seqItem, &quot;&quot;) );&#xd;
			var valor = getValueFormFloat(&quot;valor_total___&quot; + seqItem, &quot;0&quot;) * cotacao;&#xd;
			log.info( &apos;valor......................... &apos;+valor );&#xd;
			var qtd = getValueFormFloat(&quot;quantidade___&quot; + seqItem, &quot;0&quot;);&#xd;
			var peso = getValueFormFloat(&quot;peso___&quot; + seqItem, &quot;0&quot;);&#xd;
			var aenN1 = getValueForm(&quot;cod_lin_prod___&quot; + seqItem, &quot;&quot;);&#xd;
			var aenN2 = getValueForm(&quot;cod_lin_recei___&quot; + seqItem, &quot;&quot;);&#xd;
			var aenN3 = getValueForm(&quot;cod_seg_merc___&quot; + seqItem, &quot;&quot;);&#xd;
			var aenN4 = getValueForm(&quot;cod_cla_uso___&quot; + seqItem, &quot;&quot;);&#xd;
			&#xd;
			item[&quot;num_processo&quot;] = getValue(&quot;WKNumProces&quot;);&#xd;
			item[&quot;seq_item&quot;] = seqItem;&#xd;
			item[&quot;cod_item&quot;] = codItem;&#xd;
			item[&quot;quantidade&quot;] = qtd;	&#xd;
			item[&quot;valor_total&quot;] = valor;&#xd;
&#xd;
			&#xd;
			var SQL = &quot; select  nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;AD&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_aditivo,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;AG&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_agregado,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;CM&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_cimento,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;EM&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_embalagem,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;MP&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_materia_prima,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;MS&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_material_secundario,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;RV&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_material_revenda,&quot; +&#xd;
		       		&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;ST&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_servico_terceiro,&quot; +&#xd;
       				&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;FT&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_transferecia, &quot;+&#xd;
       				&quot;			nvl(EIS_F_GET_CUSTO_REAL_PAR(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;EL&apos;, &apos;S&apos;),0) * &quot;+ qtd +&quot; as custo_embalagem_logistica, &quot;+&#xd;
		       		&quot; 	       	nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;ICMS&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) + &quot; +&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;ICMS_UF_DEST&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) + &quot; +&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;ICMS_UF_REMET&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) as icms, &quot;+&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;PIS_REC&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) as pis, &quot;+&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;COFINS_REC&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) as cofins, &quot; +&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;ICMS_ST&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) as st, &quot;+&#xd;
		       		&quot;			nvl(eis_f_get_trib_0696(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;IPI&apos;, &apos;&quot;+ natOper +&quot;&apos;, &apos;&quot;+ uf +&quot;&apos;, &apos;&quot;+ finalidade +&quot;&apos;, &apos;&quot;+ codCliente +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;, &apos;&quot;+ carteira +&quot;&apos;, &quot;+ valor +&quot;, &apos;V&apos;  ),0) as ipi, &quot;+&#xd;
		       		&quot;			&quot;+ valor +&quot; * nvl(eis_f_get_commis_item_nf(&apos;&quot;+ codEmpresa +&quot;&apos;,&apos;&quot;+ codRepres +&quot;&apos;,&apos;&quot;+ codCliente +&quot;&apos;,&apos;&quot;+ codTipCli +&quot;&apos;,&apos;&quot;+ codCondPgto +&quot;&apos;, &quot;+ aenN1 +&quot;, &quot;+ aenN2 +&quot;, &quot;+ aenN3 +&quot;, &quot;+ aenN4 +&quot;, &apos;&quot;+ codItem +&quot;&apos;),0) / 100 as comis,&quot; +&#xd;
		       		&quot;       	nvl(eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;04&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot; ),0) + &quot;+&#xd;
		       		&quot;       	nvl(eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;02&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot; ),0) + &quot;+&#xd;
		       		&quot;			nvl(eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;01&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot; ),0) as acordo_comerc &quot;+&#xd;
		       		&quot;	from dual &quot;;&#xd;
			&#xd;
			log.info(&apos;SQL...&apos;+SQL );&#xd;
			&#xd;
			var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
			var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL, SQL, ConstraintType.MUST);&#xd;
			var constraints = new Array(c1,c2);&#xd;
			var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
			 &#xd;
			var lob_item = parseFloat(0);&#xd;
			var rol_item = parseFloat(0);&#xd;
			 &#xd;
			if (dataset != null) {&#xd;
				 &#xd;
				//hAPI.setCardValue(&quot;custo___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;custo&quot;) ) ) );&#xd;
				&#xd;
				var custo = parseFloat( dataset.getValue(0, &quot;custo_aditivo&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_agregado&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_cimento&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_embalagem&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_materia_prima&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_material_secundario&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_material_revenda&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_servico_terceiro&quot;) )&#xd;
						  + parseFloat( dataset.getValue(0, &quot;custo_embalagem_logistica&quot;) );&#xd;
						  &#xd;
				item[&quot;custo_aditivo&quot;] = parseFloat( dataset.getValue(0, &quot;custo_aditivo&quot;) );&#xd;
				item[&quot;custo_agregado&quot;] = parseFloat( dataset.getValue(0, &quot;custo_agregado&quot;) );&#xd;
				item[&quot;custo_cimento&quot;] = parseFloat( dataset.getValue(0, &quot;custo_cimento&quot;) );&#xd;
				item[&quot;custo_embalagem&quot;] = parseFloat( dataset.getValue(0, &quot;custo_embalagem&quot;) );&#xd;
				item[&quot;custo_materia_prima&quot;] = parseFloat( dataset.getValue(0, &quot;custo_materia_prima&quot;) );&#xd;
				item[&quot;custo_material_secundario&quot;] = parseFloat( dataset.getValue(0, &quot;custo_material_secundario&quot;) );&#xd;
				item[&quot;custo_material_revenda&quot;] = parseFloat( dataset.getValue(0, &quot;custo_material_revenda&quot;) );&#xd;
				item[&quot;custo_servico_terceiro&quot;] = parseFloat( dataset.getValue(0, &quot;custo_servico_terceiro&quot;) );&#xd;
				item[&quot;custo_embalagem_logistica&quot;] = parseFloat( dataset.getValue(0, &quot;custo_embalagem_logistica&quot;) );&#xd;
				item[&quot;custo_transferecia&quot;] = parseFloat( dataset.getValue(0, &quot;custo_transferecia&quot;) );&#xd;
				&#xd;
				item[&quot;custo&quot;] = custo;&#xd;
				log.info(&apos;CUSTO... &apos;+ getValue(&quot;WKNumProces&quot;) +&apos; custo___&apos; + seqItem+&apos; - &apos;+custo );&#xd;
				&#xd;
				custo_total += custo;&#xd;
				log.info(&apos;CUSTO TOTAL...&apos;+custo_total );&#xd;
				 &#xd;
				//hAPI.setCardValue(&quot;icms___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;icms&quot;) ) ) );&#xd;
				item[&quot;icms&quot;] = parseFloat( dataset.getValue(0, &quot;icms&quot;) );&#xd;
				icms_total += parseFloat( dataset.getValue(0, &quot;icms&quot;) );&#xd;
				&#xd;
				//hAPI.setCardValue(&quot;pis___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;pis&quot;) ) ) );&#xd;
				item[&quot;pis&quot;] = parseFloat( dataset.getValue(0, &quot;pis&quot;) );&#xd;
				pis_total += parseFloat( dataset.getValue(0, &quot;pis&quot;) );&#xd;
				&#xd;
				//hAPI.setCardValue(&quot;cofins___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;cofins&quot;) ) ) );&#xd;
				item[&quot;cofins&quot;] = parseFloat( dataset.getValue(0, &quot;cofins&quot;) );&#xd;
				cofins_total += parseFloat( dataset.getValue(0, &quot;cofins&quot;) );&#xd;
				&#xd;
				//hAPI.setCardValue(&quot;comis___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;comis&quot;) ) ) );&#xd;
				item[&quot;comis&quot;] = parseFloat( dataset.getValue(0, &quot;comis&quot;) );&#xd;
				comis_total += parseFloat( dataset.getValue(0, &quot;comis&quot;) );&#xd;
&#xd;
				//hAPI.setCardValue(&quot;st___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;st&quot;) ) ) );&#xd;
				item[&quot;st&quot;] = parseFloat( dataset.getValue(0, &quot;st&quot;) );&#xd;
				st_total += parseFloat( dataset.getValue(0, &quot;st&quot;) );&#xd;
				&#xd;
				//hAPI.setCardValue(&quot;ipi___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;ipi&quot;) ) ) );&#xd;
				item[&quot;ipi&quot;] = parseFloat( dataset.getValue(0, &quot;ipi&quot;) );&#xd;
				ipi_total += parseFloat( dataset.getValue(0, &quot;ipi&quot;) );&#xd;
				&#xd;
				//hAPI.setCardValue(&quot;acordo_comerc___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;acordo_comerc&quot;) ) ) );&#xd;
				item[&quot;acordo_comerc&quot;] = parseFloat( dataset.getValue(0, &quot;acordo_comerc&quot;) );&#xd;
				acordo_total += parseFloat( dataset.getValue(0, &quot;acordo_comerc&quot;) );&#xd;
				 &#xd;
				//hAPI.setCardValue(&quot;custo_trans___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;custo_trans&quot;) ) ) );&#xd;
				item[&quot;custo_trans&quot;] = parseFloat( dataset.getValue(0, &quot;custo_transferecia&quot;) );&#xd;
				custo_trans_total += parseFloat( dataset.getValue(0, &quot;custo_transferecia&quot;) );&#xd;
				 &#xd;
				rol_item = valor - parseFloat( dataset.getValue(0, &quot;icms&quot;) ) - parseFloat( dataset.getValue(0, &quot;pis&quot;) ) - parseFloat( dataset.getValue(0, &quot;cofins&quot;) );&#xd;
				log.info(&apos;rol_item1...&apos;+rol_item );&#xd;
				 	&#xd;
				var desc_finac =  ( valor + parseFloat( dataset.getValue(0, &quot;st&quot;) ) + parseFloat( dataset.getValue(0, &quot;ipi&quot;) ) ) * p_desc_finac / 100;&#xd;
				//var custo = parseFloat( dataset.getValue(0, &quot;custo&quot;) );&#xd;
				log.info(&apos;custo1...&apos;+custo );&#xd;
				custo += custo * pct_custo_ger/ 100;&#xd;
				log.info(&apos;pct_custo_ger...&apos;+pct_custo_ger);&#xd;
				log.info(&apos;custo2...&apos;+custo );&#xd;
				var frete = 0; &#xd;
				if( peso_total &gt; 0 ){&#xd;
					frete = frete_total * ( ( qtd * peso ) / peso_total );&#xd;
				}&#xd;
				log.info(&apos;frete...&apos;+frete );&#xd;
				lob_item = rol_item - custo - frete - desc_finac;&#xd;
				lob_item -= parseFloat( dataset.getValue(0, &quot;comis&quot;) );&#xd;
				lob_item -= parseFloat( dataset.getValue(0, &quot;acordo_comerc&quot;) );&#xd;
					&#xd;
				lob_item -= parseFloat( dataset.getValue(0, &quot;custo_transferecia&quot;) );&#xd;
				log.info(&apos;lob_item...&apos;+lob_item );&#xd;
					&#xd;
			 }&#xd;
&#xd;
			log.info(&apos;rol_item2...&apos;+rol_item );&#xd;
						 &#xd;
			 // calcula o valor da verba de marketing apartir do cadastro no&#xd;
			 // cer0023 e calcula o percentual de lob para retornar ao campo&#xd;
			var SQL2 = &quot; select nvl( eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;01&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot;, &apos;F&apos;, &quot;+ rol_item +&quot; ), 0) as verba_rapel, &quot; +&#xd;
						&quot;		nvl( eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;02&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot;, &apos;F&apos;, &quot;+ rol_item +&quot; ), 0) as acordo_comercial, &quot;+&#xd;
						&quot;		nvl( eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;03&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot;, &apos;F&apos;, &quot;+ rol_item +&quot; ), 0) as verba_marketing, &quot;+&#xd;
						&quot;		nvl( eis_f_get_valor_verba(&apos;&quot;+ codCliente +&quot;&apos;, &apos;04&apos;, trunc(sysdate), lpad(&quot;+ aenN1 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN2 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN3 +&quot;,2,&apos;0&apos;)||lpad(&quot;+ aenN4 +&quot;,2,&apos;0&apos;), &quot;+ valor +&quot;, &quot;+ valor +&quot;, &apos;F&apos;, &quot;+ rol_item +&quot; ), 0) as verba_cross_dock,&quot; +&#xd;
						&quot;      	nvl( eis_f_get_val_royaltie(&apos;&quot;+ codEmpresa +&quot;&apos;, &apos;&quot;+ codItem +&quot;&apos;,&quot;+ valor +&quot;,&quot;+ qtd +&quot;), 0) as royaltie &quot; +&#xd;
						&quot; from dual &quot;;&#xd;
			 &#xd;
			var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
			var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL2, SQL2, ConstraintType.MUST);&#xd;
			var constraints = new Array(c1,c2);&#xd;
			var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
			 &#xd;
			if (dataset != null) {&#xd;
				//hAPI.setCardValue(&quot;verb_mark___&quot; + seqItem, df2.format( parseFloat( dataset.getValue(0, &quot;verb_mark&quot;) ) ) );&#xd;
				item[&quot;verb_mark&quot;] = parseFloat( dataset.getValue(0, &quot;verba_marketing&quot;) );&#xd;
				verba_total += parseFloat( dataset.getValue(0, &quot;verba_marketing&quot;) );&#xd;
				log.info(&apos;verba_mkt_item...&apos;+hAPI.getCardValue(&quot;verb_mark___&quot; + seqItem));&#xd;
				log.info(&apos;verba_mkt_total...&apos;+verba_total );				 &#xd;
				 &#xd;
				lob_item -= parseFloat( dataset.getValue(0, &quot;verba_marketing&quot;) );&#xd;
				lob_item -= parseFloat( dataset.getValue(0, &quot;royaltie&quot;) );&#xd;
				 &#xd;
				var p_lob_item = lob_item / rol_item * 100;&#xd;
				//hAPI.setCardValue(&quot;perc_lob_item___&quot; + seqItem, df2.format( p_lob_item ) );&#xd;
				item[&quot;perc_lob_item&quot;] = parseFloat( p_lob_item );&#xd;
				log.info(&apos;lob_item...&apos;+p_lob_item );&#xd;
				&#xd;
				item[&quot;verba_marketing&quot;] = parseFloat( dataset.getValue(0, &quot;verba_marketing&quot;) );&#xd;
				item[&quot;acordo_comercial&quot;] = parseFloat( dataset.getValue(0, &quot;acordo_comercial&quot;) );&#xd;
				item[&quot;verba_rapel&quot;] = parseFloat( dataset.getValue(0, &quot;verba_rapel&quot;) );&#xd;
				item[&quot;verba_cross_dock&quot;] = parseFloat( dataset.getValue(0, &quot;verba_cross_dock&quot;) );&#xd;
				item[&quot;royaltie&quot;] = parseFloat( dataset.getValue(0, &quot;royaltie&quot;) );&#xd;
				&#xd;
			}&#xd;
&#xd;
			var c1 = DatasetFactory.createConstraint(&quot;cod_empresa&quot;, codEmpresa, codEmpresa, ConstraintType.MUST);&#xd;
			var c2 = DatasetFactory.createConstraint(&quot;cod_item&quot;, codItem, codItem, ConstraintType.MUST);&#xd;
			var c3 = DatasetFactory.createConstraint(&quot;cod_cliente&quot;, codCliente, codCliente, ConstraintType.MUST);&#xd;
			var c4 = DatasetFactory.createConstraint(&quot;num_list_preco&quot;, &apos;0&apos;, &apos;0&apos;, ConstraintType.MUST);&#xd;
			var constraints = new Array(c1,c2,c3,c4);&#xd;
			var dataset = DatasetFactory.getDataset(&apos;ultimo_preco_item_cliente&apos;, null, constraints, null);&#xd;
			 &#xd;
			if (dataset != null ) {&#xd;
				var pre_unit = (df2.format( parseFloat( dataset.getValue(0, &quot;PRE_UNIT&quot;) ) ));&#xd;
				var pct_desc_adic = df2.format( parseFloat( dataset.getValue(0, &quot;PCT_DESC_ADIC&quot;) ) );&#xd;
				var ult_preco_unit_liq = df2.format( parseFloat( dataset.getValue(0, &quot;ULT_PRECO_UNIT_LIQ&quot;) ) );&#xd;
				log.info(&apos;DATA SET...&apos;+dataset );&#xd;
				log.info(&apos;PRE_UNIT &apos;+pre_unit);&#xd;
				if (pre_unit != null &amp;&amp; dataset.rowsCount&gt;0){&#xd;
					log.info(&apos;ENTROU NO IF DO PRE_UNIT&apos;);&#xd;
					//hAPI.setCardValue(&quot;ult_preco___&quot; + seqItem,  pre_unit);&#xd;
					item[&quot;ult_preco&quot;] = parseFloat( pre_unit );&#xd;
				} else {&#xd;
					//hAPI.setCardValue(&quot;ult_preco___&quot; + seqItem, &apos;0,00&apos; );&#xd;
					item[&quot;ult_preco&quot;] = parseFloat( &apos;0.00&apos; );&#xd;
				}&#xd;
				//ultimo preco unit liquido&#xd;
				if (ult_preco_unit_liq != null &amp;&amp; dataset.rowsCount&gt;0){&#xd;
					log.info(&apos;ENTROU NO IF DO ult_preco_unit_liq&apos;);&#xd;
					//hAPI.setCardValue(&quot;ult_preco___&quot; + seqItem,  pre_unit);&#xd;
					item[&quot;ult_preco_unit_liq&quot;] = parseFloat( dataset.getValue(0, &quot;ULT_PRECO_UNIT_LIQ&quot;) );&#xd;
					log.info(&apos;ENTROU NO IF DO ult_preco_unit_liq2 &apos;+dataset.getValue(0, &quot;ULT_PRECO_UNIT_LIQ&quot;) );&#xd;
				} else {&#xd;
					//hAPI.setCardValue(&quot;ult_preco___&quot; + seqItem, &apos;0,00&apos; );&#xd;
					item[&quot;ult_preco_unit_liq&quot;] = parseFloat( &apos;0.00&apos; );&#xd;
					log.info(&apos;ENTROU NO IF DO ult_preco_unit_liq3&apos;);&#xd;
				}&#xd;
				&#xd;
				&#xd;
				log.info(&apos;ULT_DESC &apos;+pct_desc_adic);&#xd;
				if (pct_desc_adic != null &amp;&amp; dataset.rowsCount&gt;0){&#xd;
					log.info(&apos;ENTROU NO IF DO ULT_DESC&apos;);&#xd;
					//hAPI.setCardValue(&quot;ult_desc___&quot; + seqItem,  pct_desc_adic);&#xd;
					item[&quot;ult_desc&quot;] = parseFloat( dataset.getValue(0, &quot;PCT_DESC_ADIC&quot;) ); &#xd;
					hAPI.setCardValue(&apos;ult_desc___&apos;+seqItem,pct_desc_adic);&#xd;
					log.info(&apos;ENTROU NO IF DO ULT_DESC2 &apos;+parseFloat( dataset.getValue(0, &quot;PCT_DESC_ADIC&quot;) ));&#xd;
				} else {&#xd;
					//hAPI.setCardValue(&quot;ult_desc___&quot; + seqItem, &apos;0,00&apos; );&#xd;
					item[&quot;ult_desc&quot;] = parseFloat( &apos;0.00&apos; );&#xd;
				}&#xd;
			}else{&#xd;
				//hAPI.setCardValue(&quot;ult_preco___&quot; + seqItem, &apos;0,00&apos; );&#xd;
				//hAPI.setCardValue(&quot;ult_desc___&quot; + seqItem, &apos;0,00&apos; );&#xd;
				item[&quot;ult_preco&quot;] = parseFloat( &apos;0.00&apos; );&#xd;
				item[&quot;ult_desc&quot;] = parseFloat( &apos;0.00&apos; );&#xd;
			}&#xd;
			item[&quot;ies_apv_desc_item_reg&quot;] = &quot;N&quot;;&#xd;
			item[&quot;ies_apv_desc_item_nac&quot;] = &quot;N&quot;;&#xd;
			&#xd;
			if( ies_desc_item == &apos;on&apos;){&#xd;
				log.info(&apos;ENTROU NO DESCONTO DO ITEM&apos;);&#xd;
				var ult_desc_tela = getValueFormFloat(&quot;ult_desc___&quot; + seqItem,&quot;0&quot;); &#xd;
				var desconto_tela = getValueFormFloat(&quot;desconto___&quot; + seqItem,&quot;0&quot;); &#xd;
				&#xd;
				var pct_desc_adic_tela = getValueFormFloat(&quot;pct_desc_adic___&quot; + seqItem,&quot;0&quot;); &#xd;
				if ( desconto_tela &gt; ult_desc_tela ){&#xd;
					log.info(&apos;ENTROU NO DESCONTO DO ITEM 2&apos;);&#xd;
					log.info(&apos;ENTROU NO DESCONTO DO ITEM 2 DESCONTO: &apos;+desconto_tela);&#xd;
					log.info(&apos;ENTROU NO DESCONTO DO ITEM 2 ULT DESC: &apos;+ult_desc_tela);&#xd;
					if( desconto_tela &gt; ult_desc_tela ) {&#xd;
						ies_desc_item_reg = &apos;S&apos;;&#xd;
						//hAPI.setCardValue(&quot;ies_apv_desc_item_reg___&quot; + seqItem, &quot;S&quot; );&#xd;
						item[&quot;ies_apv_desc_item_reg&quot;] = &quot;S&quot;;&#xd;
						//hAPI.setCardValue(&quot;ies_apv_desc_item_nac___&quot; + seqItem, &quot;N&quot; );&#xd;
						item[&quot;ies_apv_desc_item_nac&quot;] = &quot;N&quot;;&#xd;
						//hAPI.setCardValue(&quot;obs_ger_reg&quot;, hAPI.getCardValue(&quot;obs_ger_reg&quot;)+&apos;\n&apos;+codItem+&quot; - Ult. Desc: &quot;+getValueForm(&quot;ult_desc___&quot; + seqItem, &quot;0&quot; )+&quot; Desc. Atual: &quot;+getValueFormFloat(&quot;desconto___&quot; + seqItem, &quot;0&quot; )+ &quot;% + &quot;+getValueFormFloat(&quot;pct_desc_adicional&quot;,&quot;0&quot;)+&quot;%&quot; );&#xd;
					}&#xd;
					if( desconto_tela &gt; pct_desc_adic_tela ) {&#xd;
						log.info(&apos;ENTROU NO DESCONTO DO ITEM 3&apos;);&#xd;
						log.info(&apos;ENTROU NO DESCONTO DO ITEM 3 DESCONTO: &apos;+desconto_tela);&#xd;
						log.info(&apos;ENTROU NO DESCONTO DO ITEM 3 PCT DESC ADIC: &apos;+pct_desc_adic_tela);&#xd;
						ies_desc_item_reg = &apos;S&apos;;&#xd;
						ies_desc_item_nac = &apos;S&apos;;&#xd;
						//hAPI.setCardValue(&quot;ies_apv_desc_item_reg___&quot; + seqItem, &quot;S&quot; );&#xd;
						item[&quot;ies_apv_desc_item_reg&quot;] = &quot;S&quot;;&#xd;
						//hAPI.setCardValue(&quot;ies_apv_desc_item_nac___&quot; + seqItem, &quot;S&quot; );&#xd;
						item[&quot;ies_apv_desc_item_nac&quot;] = &quot;S&quot;;&#xd;
						//hAPI.setCardValue(&quot;obs_ger_nac&quot;, hAPI.getCardValue(&quot;obs_ger_nac&quot;)+&apos;\n&apos;+codItem+&quot; - Desc. Lista: &quot;+getValueForm(&quot;pct_desc_adic___&quot; + seqItem, &quot;0&quot; )+&quot; Desc. Atual: &quot;+getValueFormFloat(&quot;desconto___&quot; + seqItem, &quot;0&quot; )+ &quot;% + &quot;+getValueFormFloat(&quot;pct_desc_adicional&quot;,&quot;0&quot;)+&quot;%&quot; );&#xd;
					}&#xd;
				}&#xd;
			}&#xd;
			log.info(&apos;Item &apos;+ item );&#xd;
			itens[ parseInt( seqItem ) ] = item;&#xd;
		}&#xd;
	}&#xd;
			&#xd;
	log.info(&apos;Antes set valor &apos;);&#xd;
&#xd;
	custo_total += custo_total * pct_custo_ger/ 100;&#xd;
	&#xd;
	log.info(&apos;custo_total......... &apos;+custo_total+&apos; &apos;+pct_custo_ger);&#xd;
	&#xd;
	hAPI.setCardValue(&quot;custo_total&quot;, df2.format( custo_total ) );&#xd;
	hAPI.setCardValue(&quot;icms_total&quot;, df2.format( icms_total ) );&#xd;
	hAPI.setCardValue(&quot;pis_total&quot;, df2.format( pis_total ) );&#xd;
	hAPI.setCardValue(&quot;cofins_total&quot;, df2.format( cofins_total ) );&#xd;
	hAPI.setCardValue(&quot;comis_total&quot;, df2.format( comis_total ) );&#xd;
	hAPI.setCardValue(&quot;acordo_total&quot;, df2.format( acordo_total ) );&#xd;
	hAPI.setCardValue(&quot;verba_total&quot;, df2.format( verba_total ) );&#xd;
	hAPI.setCardValue(&quot;custo_trans_total&quot;, df2.format( custo_trans_total ) );&#xd;
&#xd;
	hAPI.setCardValue(&quot;st_total&quot;, df2.format( st_total ) );&#xd;
	hAPI.setCardValue(&quot;ipi_total&quot;, df2.format( ipi_total ) );	&#xd;
	&#xd;
	log.info(&apos;Depois set valor &apos;);&#xd;
	&#xd;
	var valor_total = getValueFormFloat( &quot;valor_total_geral&quot;, &quot;0&quot; ) * cotacao;&#xd;
	log.info( &apos;valor_total.........&apos;+valor_total );&#xd;
	&#xd;
	hAPI.setCardValue(&quot;valor_total_com_imp&quot;, df2.format( valor_total + ipi_total + st_total ) );	&#xd;
	hAPI.setCardValue(&quot;valor_total_real&quot;, df2.format( valor_total ) );	&#xd;
	&#xd;
	&#xd;
	log.info( &apos;variaveis ROL.........&apos;+valor_total+&apos; &apos;+icms_total+&apos; &apos;+pis_total+&apos; &apos;+cofins_total );&#xd;
	&#xd;
	//recuperar o percentual adicional do tipo de venda&#xd;
	var perc_adic_tipo_venda = 0 ;&#xd;
	&#xd;
	var constraintsPai =  new Array();&#xd;
	constraintsPai.push( DatasetFactory.createConstraint(&quot;ies_matriz&quot;, &quot;on&quot;, &quot;on&quot;, ConstraintType.MUST)) ;&#xd;
	//alert(&apos;DatasetFactory empresa_compl &apos;);&#xd;
	var datasetPai = DatasetFactory.getDataset(&apos;empresa_compl&apos;, null, constraintsPai, null);&#xd;
	&#xd;
	//alert(&apos;antes if null empresa_compl &apos;);&#xd;
	if ( datasetPai != null /*&amp;&amp; datasetPai.values.length &gt; 0*/  ){&#xd;
		&#xd;
		log.info(&apos;DatasetPAI TIPO VENDA &apos;+datasetPai.values[0]);&#xd;
		log.info(&apos;DatasetPAI TIPO VENDA &apos;+datasetPai.values[1]);&#xd;
		var pai = datasetPai.values[0];&#xd;
		var documentid = datasetPai.getValue(0, &quot;DOCUMENTID&quot;);&#xd;
		var version = datasetPai.getValue(0, &quot;VERSION&quot;);&#xd;
		&#xd;
		var constraintsFilhos = new Array();&#xd;
		//alert(&apos; constraintsFilhos 0;..... &apos;);&#xd;
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;tablename&quot;, &quot;tipo_venda_adic&quot;, &quot;tipo_venda_adic&quot;, ConstraintType.MUST) );&#xd;
		//alert(&apos; constraintsFilhos 1;..... &apos;);&#xd;
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;metadata#id&quot;, documentid, documentid, ConstraintType.MUST) );&#xd;
		//alert(&apos; constraintsFilhos 2;..... &apos;);&#xd;
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;metadata#version&quot;, version, version, ConstraintType.MUST) );&#xd;
		//alert(&apos; constraintsFilhos 3;..... &apos;);&#xd;
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;cod_tipo_venda_adic&quot;, getValueForm(&quot;tipo_venda&quot;,&quot;&quot;), getValueForm(&quot;tipo_venda&quot;,&quot;&quot;), ConstraintType.MUST) );&#xd;
		//alert(&apos; constraintsFilhos 4;..... &apos;);&#xd;
		//alert(&apos;antes DatasetFactory&apos;);&#xd;
		&#xd;
		var datasetFilhos = DatasetFactory.getDataset(&apos;empresa_compl&apos;, null, constraintsFilhos, null);&#xd;
		&#xd;
		log.info(&apos;antes do IF&apos;);&#xd;
		if( datasetFilhos != null &amp;&amp; datasetFilhos.values.length &gt; 0 ){&#xd;
			log.info(&apos;depois do IF&apos;);&#xd;
			var filho = datasetFilhos.values[0];&#xd;
			log.info(&apos;depois do filho&apos;);&#xd;
			if ( datasetFilhos.getValue(0, &quot;PERC_TIPO_VENDA_ADIC&quot;) != null &amp;&amp; datasetFilhos.getValue(0, &quot;PERC_TIPO_VENDA_ADIC&quot;) != &quot;&quot; ){&#xd;
				log.info(&apos;seta valor.&apos;);&#xd;
				perc_adic_tipo_venda = datasetFilhos.getValue(0, &quot;PERC_TIPO_VENDA_ADIC&quot;);&#xd;
			} else {&#xd;
				log.info(&apos;entrou no perc adic tipo de venda 0&apos;);&#xd;
				perc_adic_tipo_venda = 0;&#xd;
			}&#xd;
		}&#xd;
	}&#xd;
	&#xd;
	log.info(&apos;perc adic tipo de venda..... &apos;+perc_adic_tipo_venda);&#xd;
	&#xd;
	perc_adic_tipo_venda = parseFloat(perc_adic_tipo_venda);&#xd;
	//fim recuperar o percentual adicional do tipo de venda&#xd;
	&#xd;
	var valor_adic_tipo_venda = ( valor_total + st_total + ipi_total ) * perc_adic_tipo_venda / 100;&#xd;
	&#xd;
	var rol = valor_total - icms_total - pis_total - cofins_total;&#xd;
	&#xd;
	var desc_finac =  ( valor_total + st_total + ipi_total ) * p_desc_finac / 100;&#xd;
	&#xd;
	log.info( &apos;variaveis LOB.........&apos;+custo_total+&apos; &apos;+comis_total+&apos; &apos;+acordo_total+&apos; &apos;+verba_total+&apos; &apos;+custo_trans_total+&apos; &apos;+frete_total+&apos; &apos;+desc_finac+&apos; &apos;+valor_adic_tipo_venda );&#xd;
	&#xd;
	lob = rol - custo_total - comis_total - acordo_total - verba_total - custo_trans_total - frete_total - desc_finac - valor_adic_tipo_venda;&#xd;
	&#xd;
	p_lob = lob / rol * 100;&#xd;
&#xd;
	hAPI.setCardValue(&quot;perc_lob&quot;, df2.format( p_lob )+&apos; %&apos; );&#xd;
	&#xd;
	//try&#xd;
	{&#xd;
		var peso3 = 0;&#xd;
		var pesomix3 = 0;&#xd;
		var rol3 = 0;&#xd;
		var cpv3 = 0;&#xd;
		var dvv3 = 0;&#xd;
		&#xd;
		log.info(&apos; acumulado &apos;);&#xd;
		var SQL = &quot; select SUM((EIS_V_COMERCIAL.VAL_LIQ_ITEM - &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.VLR_DEVOLUCAO_DEV) - &quot;+&#xd;
				&quot;	           (EIS_V_COMERCIAL.VRL_ICMS - &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.VLR_ICMS_DEVOLUCAO_DEV + &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.vrl_icms_uf_dest + &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.vrl_icms_uf_remet) - &quot;+&#xd;
				&quot;	           (EIS_V_COMERCIAL.VRL_PIS -  &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.VLR_PIS_DEVOLUCAO_DEV) - &quot;+&#xd;
				&quot;	           (EIS_V_COMERCIAL.VRL_COFINS - &quot;+&#xd;
				&quot;	            EIS_V_COMERCIAL.VLR_COFINS_DEVOLUCAO_DEV)) rol, &quot;+&#xd;
				&quot;	       SUM(EIS_V_COMERCIAL.custo_embalagem + &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_materia_prima + &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_servico_ext + &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_aditivo +  &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_agregado + &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_cimento) cpv, &quot;+&#xd;
				&quot;	       SUM(EIS_V_COMERCIAL.VALOR_COMIS + &quot;+&#xd;
				&quot;	           eis_v_comercial.val_verb_acordo_prev + &quot;+&#xd;
				&quot;	           eis_v_comercial.val_verb_rapel_prev + &quot;+&#xd;
				&quot;	           eis_v_comercial.val_verb_mark_prev +  &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.custo_frete + &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.frete_tabela) dvv, &quot;+           &#xd;
				&quot;	       SUM(EIS_V_COMERCIAL.QTD_MIX -  &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.qtd_mix_dev) pesomix, &quot;+&#xd;
				&quot;	       SUM(EIS_V_COMERCIAL.PESO_FATU -  &quot;+&#xd;
				&quot;	           EIS_V_COMERCIAL.PESO_DECLARAD_NF_DEV) peso &quot;+&#xd;
				&quot;	  FROM EIS_V_COMERCIAL@BI EIS_V_COMERCIAL &quot;+&#xd;
				&quot;	 where EIS_V_COMERCIAL.ORIGEM IN (&apos;NF&apos;, &apos;NS&apos;, &apos;DEV&apos;) &quot;+ &#xd;
				&quot;	   and EIS_V_COMERCIAL.COD_MOVTO_ESTOQ IN (&apos;VEND&apos;, &apos;REVE&apos;) &quot;+ &#xd;
				&quot;	   and EIS_V_COMERCIAL.DAT_REFER &gt;= trunc( sysdate ) - 90 &quot;+&#xd;
				&quot;	   and EIS_V_COMERCIAL.DAT_REFER &lt;= trunc( sysdate ) &quot;+&#xd;
				&quot;	   and EIS_V_COMERCIAL.cliente = &apos;&quot;+ codCliente +&quot;&apos; &quot;;&#xd;
			&#xd;
		 var c1 = DatasetFactory.createConstraint(&quot;DATABASE&quot;, &apos;java:/jdbc/LogixPRD&apos;, &apos;java:/jdbc/LogixPRD&apos;, ConstraintType.MUST);&#xd;
		 var c2 = DatasetFactory.createConstraint(&quot;SQL&quot;, SQL, SQL, ConstraintType.MUST);&#xd;
		 var constraints = new Array(c1,c2);&#xd;
		 var dataset = DatasetFactory.getDataset(&apos;select&apos;, null, constraints, null);&#xd;
		 &#xd;
		 if (dataset != null) {&#xd;
			 &#xd;
			log.info( &quot; Retornei data set acumulado..... &quot;);&#xd;
			 &#xd;
			peso3 = parseFloat( dataset.getValue(0, &quot;peso&quot;) );&#xd;
			pesomix3 = parseFloat( dataset.getValue(0, &quot;pesomix&quot;) );&#xd;
			rol3 = parseFloat( dataset.getValue(0, &quot;rol&quot;) );&#xd;
			cpv3 = parseFloat( dataset.getValue(0, &quot;cpv&quot;) );&#xd;
			dvv3 = parseFloat( dataset.getValue(0, &quot;dvv&quot;) );&#xd;
			 &#xd;
			cpv3 += cpv3 * pct_custo_ger / 100;&#xd;
			&#xd;
			log.info( &quot; Variaveis &quot;+ pesomix3 + peso3 + rol3 + cpv3 + dvv3);&#xd;
			&#xd;
			log.info( &quot; ROL_PLOB &quot;+ rol3);&#xd;
			log.info( &quot; CPV_PLOB &quot;+ cpv3);&#xd;
			log.info( &quot; DVV_PLOB &quot;+ dvv3);&#xd;
			lob3 = rol3 - cpv3 - dvv3; &#xd;
			log.info( &quot; LOB_PLOB &quot;+ lob3);&#xd;
			p_lob3 = lob3 / rol3 * 100;&#xd;
			&#xd;
			log.info( &quot; LOB &quot;+ p_lob3);&#xd;
			&#xd;
			var p_mix3 = pesomix3 / peso3 * 100; &#xd;
			 &#xd;
			log.info( &quot; LOB &quot;+ p_mix3);&#xd;
			if (p_lob3 != 0 &amp;&amp; p_lob3 != null &amp;&amp; !isNaN(p_lob3)){&#xd;
				hAPI.setCardValue(&quot;perc_lob3&quot;, df2.format( p_lob3 )+&apos; %&apos; );&#xd;
			} else {&#xd;
				hAPI.setCardValue(&quot;perc_lob3&quot;, &apos;0&apos;+&apos; %&apos; );&#xd;
			}&#xd;
			if (p_mix3 != 0 &amp;&amp; p_mix3 != null &amp;&amp; !isNaN(p_mix3) ){&#xd;
				hAPI.setCardValue(&quot;mix_geral3&quot;, df2.format( p_mix3 )+&apos; %&apos; );&#xd;
			} else {&#xd;
				hAPI.setCardValue(&quot;mix_geral3&quot;, &apos;0&apos;+&apos; %&apos; );&#xd;
			}&#xd;
		 }&#xd;
	}&#xd;
	/*catch (e){&#xd;
		//return true;&#xd;
		hAPI.setTaskComments(userId, numProcesso, 0, &quot;Atencao: Verifique o cadastro do representante no Logix, possivelmente esta bloqueado ou nao existente!&quot;);&#xd;
		throw &quot;Atencao: Verifique o cadastro do representante no Logix, possivelmente esta bloqueado ou nao existente!&quot;;&#xd;
	}*/&#xd;
	&#xd;
	try{&#xd;
		var contextWD = new javax.naming.InitialContext();&#xd;
		var dataSourceWD = contextWD.lookup(&quot;java:/jdbc/LogixPRD&quot;);&#xd;
		var connectionWD = dataSourceWD.getConnection();&#xd;
		&#xd;
		connectionWD.setAutoCommit(false);&#xd;
		&#xd;
		var sqldelete = &quot; delete fluig_proc_item where num_processo = ? &quot;; &#xd;
		var statementWD = connectionWD.prepareStatement( sqldelete );&#xd;
		statementWD.setInt(1, getValue(&quot;WKNumProces&quot;) );&#xd;
		statementWD.executeUpdate();&#xd;
		&#xd;
		var sql = &quot; insert into fluig_proc_item( &quot;+ &#xd;
	    			&quot; 	num_processo, seq_item, cod_item, quantidade, valor_total, custo, &quot;+ &#xd;
	    			&quot; 	icms, pis, cofins, comis, st, ipi, acordo_comerc, custo_trans, &quot;+&#xd;
	    			&quot; 	verb_mark, perc_lob_item, ult_preco, ult_desc, &quot;+&#xd;
	    			&quot; 	ies_apv_desc_item_reg, ies_apv_desc_item_nac, ult_preco_unit_liq,&quot; +&#xd;
	    			&quot;	custo_aditivo, custo_agregado, custo_cimento, custo_embalagem, custo_materia_prima, &quot; +&#xd;
	    			&quot;	custo_material_secundario, custo_material_revenda, custo_servico_terceiro, custo_embalagem_logistica, custo_transferecia, &quot; +&#xd;
	    			&quot;	verba_marketing, acordo_comercial, verba_rapel, verba_cross_dock, royaltie ) &quot;+&#xd;
	    			&quot; values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,&quot; +&#xd;
	    			&quot;		?, ?, ?, ?, ?,     ?, ?, ?, ?, ?,     ?, ?, ?, ?, ? ) &quot;;&#xd;
	&#xd;
		var statementWD = connectionWD.prepareStatement( sql );&#xd;
		&#xd;
		for( var p = 0; p &lt; itens.length; p++ ){&#xd;
			log.info(&apos;P.................... &apos;+ p );&#xd;
			if( itens[p] != undefined ){&#xd;
				log.info(&apos;num_processo......... &apos;+ itens[p].num_processo );&#xd;
				statementWD.setInt(1, itens[p].num_processo );&#xd;
				&#xd;
				log.info(&apos;seq_item............. &apos;+ itens[p].seq_item );&#xd;
				statementWD.setInt(2, itens[p].seq_item );&#xd;
				&#xd;
				log.info(&apos;cod_item............. &apos;+ itens[p].cod_item );&#xd;
				statementWD.setString(3, itens[p].cod_item );&#xd;
				&#xd;
				log.info(&apos;quantidade........... &apos;+ itens[p].quantidade );&#xd;
				statementWD.setFloat(4, itens[p].quantidade );&#xd;
				&#xd;
				log.info(&apos;valor_total.......... &apos;+ itens[p].valor_total );&#xd;
				statementWD.setFloat(5, itens[p].valor_total );&#xd;
				&#xd;
				log.info(&apos;custo................ &apos;+ itens[p].custo );&#xd;
				hAPI.setCardValue(&quot;custo___&quot; + itens[p].seq_item, df2.format( itens[p].custo ) );&#xd;
				statementWD.setFloat(6, itens[p].custo );&#xd;
				&#xd;
				log.info(&apos;icms................. &apos;+ itens[p].icms );&#xd;
				hAPI.setCardValue(&quot;icms___&quot; + itens[p].seq_item, df2.format( itens[p].icms ) );&#xd;
				statementWD.setFloat(7, itens[p].icms );&#xd;
				&#xd;
				log.info(&apos;pis.................. &apos;+ itens[p].pis );&#xd;
				hAPI.setCardValue(&quot;pis___&quot; + itens[p].seq_item, df2.format( itens[p].pis ) );&#xd;
				statementWD.setFloat(8, itens[p].pis );&#xd;
				&#xd;
				log.info(&apos;cofins............... &apos;+ itens[p].cofins );&#xd;
				hAPI.setCardValue(&quot;cofins___&quot; + itens[p].seq_item, df2.format( itens[p].cofins ) );&#xd;
				statementWD.setFloat(9, itens[p].cofins );&#xd;
				&#xd;
				log.info(&apos;comis................ &apos;+ itens[p].comis );&#xd;
				hAPI.setCardValue(&quot;comis___&quot; + itens[p].seq_item, df2.format( itens[p].comis ) );&#xd;
				statementWD.setFloat(10, itens[p].comis );&#xd;
				&#xd;
				log.info(&apos;st................... &apos;+ itens[p].st );&#xd;
				hAPI.setCardValue(&quot;st___&quot; + itens[p].seq_item, df2.format( itens[p].st ) );&#xd;
				statementWD.setFloat(11, itens[p].st );&#xd;
				&#xd;
				log.info(&apos;ipi.................. &apos;+ itens[p].ipi );&#xd;
				hAPI.setCardValue(&quot;ipi___&quot; + itens[p].seq_item, df2.format( itens[p].ipi ) );&#xd;
				statementWD.setFloat(12, itens[p].ipi );&#xd;
				&#xd;
				log.info(&apos;acordo_comerc........ &apos;+ itens[p].acordo_comerc );&#xd;
				hAPI.setCardValue(&quot;acordo_comerc___&quot; + itens[p].seq_item, df2.format( itens[p].acordo_comerc ) );&#xd;
				statementWD.setFloat(13, itens[p].acordo_comerc );&#xd;
				&#xd;
				log.info(&apos;custo_trans.......... &apos;+ itens[p].custo_trans );&#xd;
				hAPI.setCardValue(&quot;custo_trans___&quot; + itens[p].seq_item, df2.format( itens[p].custo_trans ) );&#xd;
				statementWD.setFloat(14, itens[p].custo_trans );&#xd;
				&#xd;
			    log.info(&apos;verb_mark............ &apos;+ itens[p].verb_mark );&#xd;
			    hAPI.setCardValue(&quot;verb_mark___&quot; + itens[p].seq_item, df2.format( itens[p].verb_mark ) );&#xd;
			    statementWD.setFloat(15, itens[p].verb_mark );&#xd;
			    &#xd;
			    log.info(&apos;perc_lob_item........ &apos;+ itens[p].perc_lob_item );&#xd;
			    hAPI.setCardValue(&quot;perc_lob_item___&quot; + itens[p].seq_item, df2.format( itens[p].perc_lob_item ) );&#xd;
			    statementWD.setFloat(16, itens[p].perc_lob_item );&#xd;
			    &#xd;
			    log.info(&apos;ult_preco............ &apos;+ itens[p].ult_preco );&#xd;
			    hAPI.setCardValue(&quot;ult_preco___&quot; + itens[p].seq_item, df2.format( itens[p].ult_preco ) );&#xd;
			    statementWD.setFloat(17, itens[p].ult_preco );&#xd;
			    &#xd;
			    log.info(&apos;ult_desc............. &apos;+ itens[p].ult_desc );&#xd;
			    hAPI.setCardValue(&quot;ult_desc___&quot; + itens[p].seq_item, df2.format( itens[p].ult_desc ) );&#xd;
			    statementWD.setFloat(18, itens[p].ult_desc );&#xd;
			    &#xd;
			    log.info(&apos;ies_apv_desc_item_reg &apos;+ itens[p].ies_apv_desc_item_reg );&#xd;
			    hAPI.setCardValue(&quot;ies_apv_desc_item_reg___&quot; + itens[p].seq_item, itens[p].ies_apv_desc_item_reg );&#xd;
			    statementWD.setString(19, itens[p].ies_apv_desc_item_reg );&#xd;
			    &#xd;
			    log.info(&apos;ies_apv_desc_item_nac &apos;+ itens[p].ies_apv_desc_item_nac );&#xd;
			    hAPI.setCardValue(&quot;ies_apv_desc_item_nac___&quot; + itens[p].seq_item, itens[p].ies_apv_desc_item_nac );&#xd;
			    statementWD.setString(20, itens[p].ies_apv_desc_item_nac );&#xd;
			    &#xd;
			    log.info(&apos;ult_preco_unit_liq &apos;+ itens[p].ult_preco_unit_liq );&#xd;
			    hAPI.setCardValue(&quot;ult_preco_unit_liq___&quot; + itens[p].seq_item, itens[p].ult_preco_unit_liq );&#xd;
			    statementWD.setFloat(21, itens[p].ult_preco_unit_liq );&#xd;
			    &#xd;
			    log.info(&apos;custo_aditivo &apos;+ itens[p].custo_aditivo );&#xd;
			    hAPI.setCardValue(&quot;custo_aditivo___&quot; + itens[p].seq_item, itens[p].custo_aditivo );&#xd;
			    statementWD.setFloat(22, itens[p].custo_aditivo );&#xd;
			    &#xd;
			    log.info(&apos;custo_agregado &apos;+ itens[p].custo_agregado );&#xd;
			    hAPI.setCardValue(&quot;custo_agregado___&quot; + itens[p].seq_item, itens[p].custo_agregado );&#xd;
			    statementWD.setFloat(23, itens[p].custo_agregado );&#xd;
			    &#xd;
			    log.info(&apos;custo_cimento &apos;+ itens[p].custo_cimento );&#xd;
			    hAPI.setCardValue(&quot;custo_cimento___&quot; + itens[p].seq_item, itens[p].custo_cimento );&#xd;
			    statementWD.setFloat(24, itens[p].custo_cimento );&#xd;
			    &#xd;
			    log.info(&apos;custo_embalagem &apos;+ itens[p].custo_embalagem );&#xd;
			    hAPI.setCardValue(&quot;custo_embalagem___&quot; + itens[p].seq_item, itens[p].custo_embalagem );&#xd;
			    statementWD.setFloat(25, itens[p].custo_embalagem );&#xd;
			    &#xd;
			    log.info(&apos;custo_materia_prima &apos;+ itens[p].custo_materia_prima );&#xd;
			    hAPI.setCardValue(&quot;custo_materia_prima___&quot; + itens[p].seq_item, itens[p].custo_materia_prima );&#xd;
			    statementWD.setFloat(26, itens[p].custo_materia_prima );&#xd;
			    &#xd;
			    log.info(&apos;custo_material_secundario &apos;+ itens[p].custo_material_secundario );&#xd;
			    hAPI.setCardValue(&quot;custo_material_secundario___&quot; + itens[p].seq_item, itens[p].custo_material_secundario );&#xd;
			    statementWD.setFloat(27, itens[p].custo_material_secundario );&#xd;
			    &#xd;
			    log.info(&apos;custo_material_revenda &apos;+ itens[p].custo_material_revenda );&#xd;
			    hAPI.setCardValue(&quot;custo_material_revenda___&quot; + itens[p].seq_item, itens[p].custo_material_revenda );&#xd;
			    statementWD.setFloat(28, itens[p].custo_material_revenda );&#xd;
			    &#xd;
			    log.info(&apos;custo_servico_terceiro &apos;+ itens[p].custo_servico_terceiro );&#xd;
			    hAPI.setCardValue(&quot;custo_servico_terceiro___&quot; + itens[p].seq_item, itens[p].custo_servico_terceiro );&#xd;
			    statementWD.setFloat(29, itens[p].custo_servico_terceiro );&#xd;
			    &#xd;
			    log.info(&apos;custo_embalagem_logistica &apos;+ itens[p].custo_embalagem_logistica );&#xd;
			    hAPI.setCardValue(&quot;custo_embalagem_logistica___&quot; + itens[p].seq_item, itens[p].custo_embalagem_logistica );&#xd;
			    statementWD.setFloat(30, itens[p].custo_embalagem_logistica );&#xd;
			    &#xd;
			    log.info(&apos;custo_transferecia &apos;+ itens[p].custo_transferecia );&#xd;
			    hAPI.setCardValue(&quot;custo_transferecia___&quot; + itens[p].seq_item, itens[p].custo_transferecia );&#xd;
			    statementWD.setFloat(31, itens[p].custo_transferecia );&#xd;
			    &#xd;
			    log.info(&apos;verba_marketing &apos;+ itens[p].verba_marketing );&#xd;
			    hAPI.setCardValue(&quot;verba_marketing___&quot; + itens[p].seq_item, itens[p].verba_marketing );&#xd;
			    statementWD.setFloat(32, itens[p].verba_marketing );&#xd;
			    &#xd;
			    log.info(&apos;acordo_comercial &apos;+ itens[p].acordo_comercial );&#xd;
			    hAPI.setCardValue(&quot;acordo_comercial___&quot; + itens[p].seq_item, itens[p].acordo_comercial );&#xd;
			    statementWD.setFloat(33, itens[p].acordo_comercial );&#xd;
			    &#xd;
			    log.info(&apos;verba_rapel &apos;+ itens[p].verba_rapel );&#xd;
			    hAPI.setCardValue(&quot;verba_rapel___&quot; + itens[p].seq_item, itens[p].verba_rapel );&#xd;
			    statementWD.setFloat(34, itens[p].verba_rapel );&#xd;
			    &#xd;
			    log.info(&apos;verba_cross_dock &apos;+ itens[p].verba_cross_dock );&#xd;
			    hAPI.setCardValue(&quot;verba_cross_dock___&quot; + itens[p].seq_item, itens[p].verba_cross_dock );&#xd;
			    statementWD.setFloat(35, itens[p].verba_cross_dock );&#xd;
			    &#xd;
			    log.info(&apos;royaltie &apos;+ itens[p].royaltie );&#xd;
			    hAPI.setCardValue(&quot;royaltie___&quot; + itens[p].seq_item, itens[p].royaltie );&#xd;
			    statementWD.setFloat(36, itens[p].royaltie );&#xd;
			    &#xd;
			    statementWD.executeUpdate();&#xd;
			}&#xd;
		}&#xd;
		connectionWD.commit();&#xd;
	}catch (e){&#xd;
		log.info( &quot;ERROOOOOO&quot;+ e.toString() );&#xd;
		throw( &quot;ERRO:&quot;+ e.toString() );&#xd;
	}finally {&#xd;
		//rsWD.close();&#xd;
		if(statementWD != null) statementWD.close();&#xd;
		if(connectionWD != null) connectionWD.close();&#xd;
	}	&#xd;
	&#xd;
	if( ies_mix == &apos;on&apos; ){&#xd;
		if ( getValueFormFloat( &quot;mix_geral&quot;, &quot;0&quot;)&#xd;
		   &lt;= getValueFormFloat(&quot;perc_mix_ger_reg&quot;, &quot;0&quot;) ){&#xd;
			ies_mix_geral_reg = &apos;S&apos;;&#xd;
		} &#xd;
		if ( getValueFormFloat(&quot;mix_geral&quot;, &quot;0&quot;)&#xd;
		   &lt;= getValueFormFloat(&quot;perc_mix_ger_nac&quot;, &quot;0&quot;) ){&#xd;
			ies_mix_geral_nac = &apos;S&apos;;&#xd;
		} 	&#xd;
	}&#xd;
	&#xd;
	if( ies_desc_ped == &apos;on&apos; ){&#xd;
		if ( getValueFormFloat(&quot;desc_medio&quot;, &quot;0&quot;)&#xd;
		    &gt; ( getValueFormFloat(&quot;desc_maximo&quot;, &quot;0&quot;)&#xd;
		      + getValueFormFloat(&quot;perc_desc_ger_reg&quot;, &quot;0&quot;) ) ){&#xd;
			ies_desc_medio_reg = &apos;S&apos;;&#xd;
		}&#xd;
		if ( getValueFormFloat(&quot;desc_medio&quot;, &quot;0&quot;)&#xd;
			    &gt; ( getValueFormFloat(&quot;desc_maximo&quot;, &quot;0&quot;)&#xd;
			      + getValueFormFloat(&quot;perc_desc_ger_nac&quot;, &quot;0&quot;) ) ){&#xd;
			ies_desc_medio_nac = &apos;S&apos;;&#xd;
		} &#xd;
	}&#xd;
	&#xd;
	if( ies_lob == &apos;on&apos;){&#xd;
		&#xd;
		if (prim_pedido != &apos;S&apos;) {&#xd;
			if( p_lob &lt; p_lob3 || p_lob3 == 0 || isNaN(p_lob3) || p_lob &lt; 0){&#xd;
				ies_pct_lob_reg = &apos;S&apos;;&#xd;
				hAPI.setCardValue(&quot;obs_ger_reg&quot;, hAPI.getCardValue(&quot;obs_ger_reg&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; )+&quot; ou LOB está negativo!&quot; );&#xd;
			}  &#xd;
			&#xd;
			var p_reduz = (1-p_lob/p_lob3)*100;&#xd;
			&#xd;
			if( ( p_reduz &gt; getValueFormFloat( &quot;perc_lob_ger_nac&quot;, &quot;0&quot;) || p_lob3 == 0 || isNaN(p_lob3))&#xd;
				&amp;&amp; getValueFormFloat( &quot;perc_lob_ger_nac&quot;, &quot;0&quot;) &gt; 0 ){&#xd;
				ies_pct_lob_nac = &apos;S&apos;;&#xd;
				hAPI.setCardValue(&quot;obs_ger_nac&quot;, hAPI.getCardValue(&quot;obs_ger_nac&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; ) );&#xd;
			} &#xd;
	&#xd;
			if( ( p_reduz &gt; getValueFormFloat( &quot;perc_lob_ctr&quot;, &quot;0&quot; ) || p_lob3 == 0 || isNaN(p_lob3))&#xd;
				&amp;&amp; getValueFormFloat( &quot;perc_lob_ctr&quot;, &quot;0&quot;) &gt; 0 ){&#xd;
				ies_pct_lob_ctr = &apos;S&apos;;&#xd;
				hAPI.setCardValue(&quot;obs_ctr&quot;, hAPI.getCardValue(&quot;obs_ctr&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; ) );			&#xd;
			} 		&#xd;
		} else {&#xd;
			if (perc_minimo_lob&gt;p_lob){&#xd;
				ies_pct_lob_reg = &apos;N&apos;;&#xd;
				ies_pct_lob_nac = &apos;N&apos;;&#xd;
				ies_pct_lob_ctr = &apos;N&apos;;&#xd;
			} else {&#xd;
				if( p_lob &lt; p_lob3 || p_lob3 == 0 || isNaN(p_lob3)){&#xd;
					ies_pct_lob_reg = &apos;S&apos;;&#xd;
					hAPI.setCardValue(&quot;obs_ger_reg&quot;, hAPI.getCardValue(&quot;obs_ger_reg&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; ) );&#xd;
				}  &#xd;
				&#xd;
				var p_reduz = (1-p_lob/p_lob3)*100;&#xd;
				&#xd;
				if( ( p_reduz &gt; getValueFormFloat( &quot;perc_lob_ger_nac&quot;, &quot;0&quot;) || p_lob3 == 0 || isNaN(p_lob3))&#xd;
					&amp;&amp; getValueFormFloat( &quot;perc_lob_ger_nac&quot;, &quot;0&quot;) &gt; 0 ){&#xd;
					ies_pct_lob_nac = &apos;S&apos;;&#xd;
					hAPI.setCardValue(&quot;obs_ger_nac&quot;, hAPI.getCardValue(&quot;obs_ger_nac&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; ) );&#xd;
				} &#xd;
		&#xd;
				if( ( p_reduz &gt; getValueFormFloat( &quot;perc_lob_ctr&quot;, &quot;0&quot; ) || p_lob3 == 0 || isNaN(p_lob3))&#xd;
					&amp;&amp; getValueFormFloat( &quot;perc_lob_ctr&quot;, &quot;0&quot;) &gt; 0 ){&#xd;
					ies_pct_lob_ctr = &apos;S&apos;;&#xd;
					hAPI.setCardValue(&quot;obs_ctr&quot;, hAPI.getCardValue(&quot;obs_ctr&quot;)+&quot;\n Lob: &quot;+getValueForm(&quot;perc_lob&quot; , &quot;0&quot; )+&quot; &lt; Lob Médio: &quot;+getValueFormFloat(&quot;perc_lob3&quot;, &quot;0&quot; ) );			&#xd;
				}&#xd;
			}&#xd;
		} 	&#xd;
	}&#xd;
	&#xd;
	//inicio da consistencia se a lista foi alterada&#xd;
	if (ies_aprov_list == &apos;on&apos; ){&#xd;
		&#xd;
		var listaEsp = &apos;&apos;;&#xd;
		var temListaEsp = &apos;&apos;;&#xd;
		var listaPedido = &apos;&apos;;&#xd;
		var codListaPedido = &apos;&apos;;&#xd;
		log.info(&apos;Antes Pai Filho....&apos; );&#xd;
		listaPedido = hAPI.getCardValue(&apos;empresa_hd&apos;)+hAPI.getCardValue(&apos;lista_preco_hd&apos;);&#xd;
		codListaPedido = hAPI.getCardValue(&apos;lista_preco_hd&apos;);&#xd;
		log.info(&apos;Lista de Preco &apos;+listaPedido);&#xd;
		&#xd;
		var cons = new Array();&#xd;
		&#xd;
		cons.push( DatasetFactory.createConstraint( &apos;dataSet&apos;, &apos;empresa_compl&apos;, &apos;empresa_compl&apos;, ConstraintType.MUST) );&#xd;
		cons.push( DatasetFactory.createConstraint( &apos;table&apos;, &apos;lista_esp&apos;, &apos;lista_esp&apos;, ConstraintType.MUST) );&#xd;
		var datasetP = DatasetFactory.getDataset( &apos;paiFilho&apos;, null, cons, null);&#xd;
		&#xd;
		log.info(&apos;Data set ListaPrecoEsp....&apos;+datasetP );&#xd;
		if ( datasetP != null ){&#xd;
			for (var x = 0; x &lt; datasetP.values.length; x++) {&#xd;
				log.info(&apos;lista....&apos;+ datasetP.getValue(x,&quot;chave_lista_esp&quot;) );&#xd;
				if ( x &gt; 0 ){&#xd;
					listaEsp = datasetP.getValue(x,&quot;chave_lista_esp&quot;);&#xd;
					log.info(&apos;Lista ESPECIAL &apos;+ listaEsp);&#xd;
					if (listaEsp == listaPedido){&#xd;
						temListaEsp = &apos;S&apos;;&#xd;
						log.info(&apos;Entrou na lista especial&apos;);&#xd;
						break;&#xd;
					}&#xd;
				}&#xd;
			}&#xd;
		}&#xd;
		var constraints = new Array();&#xd;
		var codUltLista = &apos;&apos;;&#xd;
		constraints.push( DatasetFactory.createConstraint(&quot;cod_cliente&quot;, codCliente, codCliente, ConstraintType.MUST) );&#xd;
		var dataset2 = DatasetFactory.getDataset(&apos;clientes_ult_ped&apos;, null, constraints, null);&#xd;
		&#xd;
		if ( dataset2 != null ){&#xd;
			codUltLista = dataset2.getValue(0,&quot;num_list_preco&quot;);&#xd;
			log.info(&apos;Ultima Lista de Preco Utilizada &apos;+codUltLista);&#xd;
			if (temListaEsp != &apos;S&apos;){&#xd;
				if (codUltLista != codListaPedido) {&#xd;
					ies_alt_list_reg = &apos;S&apos;;&#xd;
					hAPI.setCardValue(&quot;obs_ger_reg&quot;, hAPI.getCardValue(&quot;obs_ger_reg&quot;)+&quot;\n A lista de preço foi alterada!&quot; );&#xd;
				}&#xd;
			}&#xd;
		}	&#xd;
	}&#xd;
	//fim da consistencia se a lista foi alterada&#xd;
&#xd;
	hAPI.setCardValue(&quot;ies_mix_geral_reg&quot;, ies_mix_geral_reg );&#xd;
	hAPI.setCardValue(&quot;ies_mix_geral_nac&quot;, ies_mix_geral_nac );&#xd;
	hAPI.setCardValue(&quot;ies_desc_medio_reg&quot;, ies_desc_medio_reg );&#xd;
	hAPI.setCardValue(&quot;ies_desc_medio_nac&quot;, ies_desc_medio_nac );&#xd;
	&#xd;
	hAPI.setCardValue(&quot;ies_desc_item_reg&quot;, ies_desc_item_reg );&#xd;
	hAPI.setCardValue(&quot;ies_desc_item_nac&quot;, ies_desc_item_nac );&#xd;
	hAPI.setCardValue(&quot;ies_pct_lob_reg&quot;, ies_pct_lob_reg );&#xd;
	hAPI.setCardValue(&quot;ies_pct_lob_nac&quot;, ies_pct_lob_nac );&#xd;
	hAPI.setCardValue(&quot;ies_pct_lob_ctr&quot;, ies_pct_lob_ctr );&#xd;
	&#xd;
	hAPI.setCardValue(&quot;ies_alt_list_reg&quot;, ies_alt_list_reg);&#xd;
	&#xd;
	// regra para clientes exceção, valida somente se tem desconto dentro do&#xd;
	// pedido. Pq não deve ter,&#xd;
	// estes clientes já tem lista previamente negociada&#xd;
	var cli_exc_mix = getValueForm(&quot;cli_exc_mix&quot; , &quot;&quot; );&#xd;
	log.info(&apos;cliente_excecao &apos;+cli_exc_mix);&#xd;
	if (cli_exc_mix.trim() == &apos;S&apos;){&#xd;
		log.info(&apos;entrou if cliente excecao&apos;);&#xd;
		hAPI.setCardValue(&quot;ies_mix_geral_reg&quot;, &quot;N&quot; );&#xd;
		hAPI.setCardValue(&quot;ies_pct_lob_reg&quot;, &quot;N&quot; );&#xd;
		hAPI.setCardValue(&quot;ies_mix_geral_nac&quot;, &quot;N&quot; );&#xd;
		hAPI.setCardValue(&quot;ies_pct_lob_nac&quot;, &quot;N&quot; );&#xd;
		hAPI.setCardValue(&quot;ies_pct_lob_ctr&quot;, &quot;N&quot;);&#xd;
	}&#xd;
	&#xd;
}&#xd;
&#xd;
function getValueForm( campo, padrao ){&#xd;
	//log.info( &quot;Campo........&quot;+campo );&#xd;
	var valor = hAPI.getCardValue( campo );&#xd;
	if( padrao == &quot;tipoPessoa&quot; ) &#xd;
		if ( valor.indexOf(&quot;/0000-&quot;) == -1 )&#xd;
			valor = &quot;F&quot;;&#xd;
		else&#xd;
			valor = &quot;J&quot;;&#xd;
	log.info( &quot;Valor........&quot;+valor );&#xd;
	if ( valor == &quot;&quot; || valor == undefined || valor == &quot;null&quot; ){&#xd;
		valor = padrao;&#xd;
		//log.info( &quot;Valor padrao........&quot;+valor );&#xd;
	}&#xd;
	return valor;&#xd;
}&#xd;
&#xd;
function isNull( valor, padrao ){&#xd;
	if ( isNaN( valor ) ){&#xd;
		return padrao;&#xd;
	}else{&#xd;
		return valor;&#xd;
	}&#xd;
}&#xd;
&#xd;
function kbtReplaceAll( valor, needle, replacement) {&#xd;
	log.info( &apos;Valor kbtReplaceAll 1.........&apos;+ valor+&apos; &apos;+needle+&apos; &apos;+replacement );&#xd;
	log.info( &apos;Valor kbtReplaceAll 2.........&apos;+ valor.split(needle).length );&#xd;
	log.info( &apos;Valor kbtReplaceAll 3.........&apos;+ valor.split(needle).join(replacement) );&#xd;
    return valor.split(needle).join(replacement);&#xd;
};&#xd;
&#xd;
&#xd;
/*function getValueFormFloat( campo, padrao ){&#xd;
	log.info(&apos;getValueFormFloat.........&apos;+campo+&apos; &apos;+padrao);&#xd;
	var vnPadrao = padrao+&quot;&quot;;&#xd;
	var vnValor = getValueForm(campo, vnPadrao)+&quot;&quot;;&#xd;
	log.info(&apos;getValueFormFloat vnValor.........&apos;+vnValor+&apos; &apos;+vnPadrao);&#xd;
	var valor = parseFloat( vnValor.replaceAll(&quot;.&quot;, &quot;&quot;).replaceAll(&quot;,&quot;,&quot;.&quot;) );&#xd;
	return isNull( valor, parseFloat( vnPadrao.replaceAll(&quot;.&quot;,&quot;&quot;).replaceAll(&quot;,&quot;,&quot;.&quot;) ) );&#xd;
}*/&#xd;
&#xd;
&#xd;
function getValueFormFloat( campo, padrao ){&#xd;
	log.info(&apos;getValueFormFloat.........&apos;+campo+&apos; &apos;+padrao);&#xd;
	var vnPadrao = padrao+&quot;&quot;;&#xd;
	var vnValor = getValueForm(campo, vnPadrao)+&quot;&quot;;&#xd;
	log.info(&apos;getValueFormFloat vnValor.........&apos;+vnValor+&apos; &apos;+vnPadrao);&#xd;
	var valor = parseFloat( kbtReplaceAll( kbtReplaceAll( vnValor, &quot;.&quot;, &quot;&quot;), &quot;,&quot;,&quot;.&quot;) );&#xd;
	return isNull( valor, parseFloat( kbtReplaceAll( kbtReplaceAll( vnPadrao, &quot;.&quot;, &quot;&quot; ), &quot;,&quot; ,&quot;.&quot;) ) );&#xd;
}&#xd;
&#xd;
&#xd;
function loadRepres( cod_repres ){&#xd;
	&#xd;
	var numProcesso = getValue(&apos;WKNumProces&apos;);&#xd;
	var userId = getValue(&quot;WKUser&quot;);&#xd;
&#xd;
	try{&#xd;
&#xd;
		log.info(&quot;## Repres ## &quot;+cod_repres );&#xd;
		var constraints = new Array();&#xd;
		constraints.push( DatasetFactory.createConstraint(&quot;cod_repres&quot;, cod_repres, cod_repres, ConstraintType.MUST) );&#xd;
		var dsRep = DatasetFactory.getDataset(&quot;representante&quot;, null, constraints, null);&#xd;
		var codRegional = &quot;&quot;;&#xd;
		if ( dsRep != null  ){&#xd;
			codRegional = dsRep.getValue(0, &quot;cv_4&quot;);&#xd;
			log.info(&apos;codRegional......&apos;+codRegional);&#xd;
		}&#xd;
		&#xd;
		log.info(&quot;## Regional ## &quot;+codRegional );&#xd;
		var constraints = new Array();&#xd;
		constraints.push( DatasetFactory.createConstraint(&quot;tablename&quot;, &quot;regional&quot;, &quot;regional&quot;, ConstraintType.MUST) );&#xd;
		constraints.push( DatasetFactory.createConstraint(&quot;metadata#active&quot;, true, true, ConstraintType.MUST) );&#xd;
		constraints.push( DatasetFactory.createConstraint(&quot;cod_regional&quot;, codRegional, codRegional, ConstraintType.MUST) );&#xd;
		var dsRepCpl = DatasetFactory.getDataset(&quot;representante_compl&quot;, null, constraints, null);&#xd;
		&#xd;
		if ( dsRepCpl != null &amp;&amp; dsRepCpl.rowsCount&gt;0){&#xd;
			log.info(&quot;## parametros ## &quot;+ dsRepCpl.getValue(0, &quot;perc_mix_ger_reg&quot;) );&#xd;
			hAPI.setCardValue(&quot;perc_mix_ger_reg&quot;, dsRepCpl.getValue(0, &quot;perc_mix_ger_reg&quot;) );&#xd;
			hAPI.setCardValue(&quot;perc_mix_ger_nac&quot;, dsRepCpl.getValue(0, &quot;perc_mix_ger_nac&quot;) );&#xd;
			hAPI.setCardValue(&quot;perc_desc_ger_reg&quot;, dsRepCpl.getValue(0, &quot;perc_desc_ger_reg&quot;) );&#xd;
			hAPI.setCardValue(&quot;perc_desc_ger_nac&quot;, dsRepCpl.getValue(0, &quot;perc_desc_ger_nac&quot;) );&#xd;
		&#xd;
			hAPI.setCardValue(&quot;perc_lob_ger_nac&quot;, dsRepCpl.getValue(0, &quot;lob_ger_nac&quot;) );&#xd;
			hAPI.setCardValue(&quot;perc_lob_ctr&quot;, dsRepCpl.getValue(0, &quot;lob_controller&quot;) );			&#xd;
		}&#xd;
		&#xd;
	} catch (e){&#xd;
		hAPI.setTaskComments(userId, numProcesso, 0, &quot;Atencao: Verifique o cadastro do representante no Logix, possivelmente esta bloqueado ou nao existente!&quot;);&#xd;
		throw &quot;Atencao: Verifique o cadastro do representante no Logix, possivelmente esta bloqueado ou nao existente!&quot;;&#xd;
	}&#xd;
	return true;&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>servicetask79</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function servicetask79(attempt, message) {
	//recuperar o valor minimo do pedido por tipo de cliente
	var valor_minimo_tipo_cliente = 0 ;
	hAPI.setCardValue(&quot;ies_aprova_min_tip_cliente&quot;,&quot;N&quot;);
	
	var constraintsPai =  new Array();
	constraintsPai.push( DatasetFactory.createConstraint(&quot;ies_matriz&quot;, &quot;on&quot;, &quot;on&quot;, ConstraintType.MUST)) ;
	//alert(&apos;DatasetFactory empresa_compl &apos;);
	var datasetPai = DatasetFactory.getDataset(&apos;empresa_compl&apos;, null, constraintsPai, null);
	
	//alert(&apos;antes if null empresa_compl &apos;);
	if ( datasetPai != null /*&amp;&amp; datasetPai.values.length &gt; 0*/  ){
		
		log.info(&apos;DatasetPAI TIPO VENDA &apos;+datasetPai.values[0]);
		log.info(&apos;DatasetPAI TIPO VENDA &apos;+datasetPai.values[1]);
		var pai = datasetPai.values[0];
		var documentid = datasetPai.getValue(0, &quot;DOCUMENTID&quot;);
		var version = datasetPai.getValue(0, &quot;VERSION&quot;);
		log.info(&apos;TIPO DE CLIENTE DO VALOR &apos;+getValueForm(&quot;cod_tip_cli&quot;,&quot;&quot;));
		var constraintsFilhos = new Array();
		//alert(&apos; constraintsFilhos 0;..... &apos;);
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;tablename&quot;, &quot;tipo_cliente_valor&quot;, &quot;tipo_cliente_valor&quot;, ConstraintType.MUST) );
		//alert(&apos; constraintsFilhos 1;..... &apos;);
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;metadata#id&quot;, documentid, documentid, ConstraintType.MUST) );
		//alert(&apos; constraintsFilhos 2;..... &apos;);
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;metadata#version&quot;, version, version, ConstraintType.MUST) );
		//alert(&apos; constraintsFilhos 3;..... &apos;);
		constraintsFilhos.push( DatasetFactory.createConstraint(&quot;cod_tip_cli_valor&quot;, getValueForm(&quot;cod_tip_cli&quot;,&quot;&quot;), getValueForm(&quot;cod_tip_cli&quot;,&quot;&quot;), ConstraintType.MUST) );
		//alert(&apos; constraintsFilhos 4;..... &apos;);
		//alert(&apos;antes DatasetFactory&apos;);
		
		var datasetFilhos = DatasetFactory.getDataset(&apos;empresa_compl&apos;, null, constraintsFilhos, null);
		
		log.info(&apos;antes do IF&apos;);
		if( datasetFilhos != null &amp;&amp; datasetFilhos.values.length &gt; 0 ){
			log.info(&apos;depois do IF&apos;);
			var filho = datasetFilhos.values[0];
			log.info(&apos;depois do filho&apos;);
			if ( datasetFilhos.getValue(0, &quot;VALOR_TIP_CLI_ORC&quot;) != null &amp;&amp; datasetFilhos.getValue(0, &quot;VALOR_TIP_CLI_ORC&quot;) != &quot;&quot; ){
				log.info(&apos;seta valor.&apos;);
				valor_minimo_tipo_cliente = datasetFilhos.getValue(0, &quot;VALOR_TIP_CLI_ORC&quot;);
				log.info(&apos;VALOR MINIMO TIPO DE CLIENTE &apos;+valor_minimo_tipo_cliente);
			} else {
				log.info(&apos;entrou no perc adic tipo de venda 0&apos;);
				valor_minimo_tipo_cliente = 0;
			}
		}
	}
	
	hAPI.setCardValue(&quot;valor_min_tip_cliente&quot;,valor_minimo_tipo_cliente);
	var valor_pedido = getValueFormFloat(&quot;valor_total_geral&quot;,&quot;0&quot;);
	var valor_minimo_float = getValueFormFloat(&quot;valor_min_tip_cliente&quot;,&quot;0&quot;);
	
	if (valor_pedido &lt; valor_minimo_float) {
		hAPI.setCardValue(&quot;ies_aprova_min_tip_cliente&quot;,&quot;S&quot;);
	} else {
		hAPI.setCardValue(&quot;ies_aprova_min_tip_cliente&quot;,&quot;N&quot;);
	}

	//fim valor minimo do pedido por tipo de cliente
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>servicetask47</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function servicetask47(attempt, message) {

	log.info( &quot;INICIO AUXILIAR.....&quot; );
	
	var msg_erro = &quot;&quot;;
	
	try{	
		
		var clientService = fluigAPI.getAuthorizeClientService();
		
		var constraints = new Array();
		var cod_empresa = hAPI.getCardValue( &quot;empresa&quot; );
		var lista_preco = hAPI.getCardValue( &quot;lista_preco&quot; );
		constraints.push( DatasetFactory.createConstraint(&quot;cod_empresa&quot;, cod_empresa, cod_empresa, ConstraintType.MUST) );
		constraints.push( DatasetFactory.createConstraint(&quot;num_list_preco&quot;, lista_preco, lista_preco, ConstraintType.MUST) );
		var lista = DatasetFactory.getDataset(&quot;lista_de_preco&quot;, null, constraints, null);
			
		if ( lista != null ){
			log.info(&apos;Data Set. Inc. Pedido 00000&apos;);
			var data = {
				companyId : &quot;1&quot;,
				serviceCode : &quot;Logix_PRD&quot;,
				endpoint : &quot;/logixrest/cerr4/descarga&quot;,
				method : &quot;post&quot;,//&quot;post&quot;, &quot;delete&quot;, &quot;patch&quot;, &quot;put&quot;, &quot;get&quot;
				timeoutService: &quot;240&quot;
			}; 
						
			log.info(&apos;Data Set. Inc. Pedido&apos;);
			var params = {};
			var lr_descarga = {};
			lr_descarga[&quot;empresa&quot;] = getValueForm( &quot;empresa&quot;, &quot;&quot; )+&quot;&quot;;
			lr_descarga[&quot;num_pedido&quot;] = getValueForm( &quot;num_pedido&quot;, &quot;&quot; )+&quot;&quot;;
			lr_descarga[&quot;ies_valor&quot;] = lista.getValue(0, &quot;ind_descaga&quot;)+&quot;&quot;;
			var numDesc = &quot;0&quot;;
			if ( lista.getValue(0, &quot;ind_descaga&quot;)+&quot;&quot; == &quot;S&quot;  ){
				numDesc = &quot;1&quot;;
			}
			lr_descarga[&quot;num_descarga&quot;] = numDesc;
			lr_descarga[&quot;tipo_frete&quot;] = getValueForm( &quot;tipo_frete&quot; )+&quot;&quot;;
			lr_descarga[&quot;usuario&quot;] = getValueForm(&quot;login&quot;)+&quot;&quot;;
			log.info(&apos;Data Set. Inc. Pedido 00003&apos;);
			params[&quot;lr_descarga&quot;] = lr_descarga;
			data[&quot;params&quot;] = params;
		    
			log.info(&quot;## antes do stringify ## &quot;+data.toString() );
			var jj = JSON.stringify( data );
			log.info(&apos;Data Set. Inc. Pedido 00004&apos;);
			log.info(&quot;## RESULT POST jj ## &quot;+ jj );
			var vo = clientService.invoke( jj );
			log.info(&apos;Data Set. Inc. Pedido 00005&apos;);
			if(vo.getResult()== &quot;&quot; || vo.getResult().isEmpty()){
				throw &quot;Retorno está vazio&quot;;
			}
		}
	} catch(err) {
		msg_erro += err.toString(); 
	}
	
	try{	

		if ( ( getValueForm( &quot;seq_end&quot;, &quot;0&quot; ) == &quot;0&quot; 
		    || getValueForm( &quot;seq_end&quot;, &quot;0&quot; ) == &quot;&quot; ) 
		    &amp;&amp; getValueForm( &quot;tipo_logradouro_ent&quot;, &quot;&quot; ) != &quot;&quot; ){
			
			var clientService = fluigAPI.getAuthorizeClientService();
			
			var data = {
				companyId : &quot;1&quot;,
				serviceCode : &quot;Logix_PRD&quot;,
				endpoint : &quot;/logixrest/cerr3/endcli&quot;,
				method : &quot;post&quot;, //&quot;post&quot;, &quot;delete&quot;, &quot;patch&quot;, &quot;put&quot;, &quot;get&quot;
				timeoutService: &quot;240&quot;
			}; 
	
		    var params = {};
		    
		    var lr_endereco = {};
		    lr_endereco[&quot;cod_cliente&quot;] = getValueForm( &quot;cod_cliente&quot;, &quot;&quot; )+&quot;&quot;;
		    lr_endereco[&quot;tip_endereco_end_cob&quot;] = &quot;E&quot;;
		    lr_endereco[&quot;sequencia_end_cob&quot;] = &quot;0&quot;;
		    lr_endereco[&quot;tip_logradouro_end_cob&quot;] = getValueForm( &quot;tipo_logradouro_ent&quot;, &quot;&quot; )+&quot;&quot;;
		    log.info( getValueForm( &quot;endereco_ent&quot;, &quot;&quot; )+&quot;&quot; );
		    lr_endereco[&quot;logradouro_end_cob&quot;] = getValueForm( &quot;endereco_ent&quot;, &quot;&quot; )+&quot;&quot;;
		    lr_endereco[&quot;num_iden_lograd_end_cob&quot;] = getValueForm( &quot;numero_ent&quot;, &quot;&quot; )+&quot;&quot;;
		    lr_endereco[&quot;complemento_endereco_end_cob&quot;] = &quot;&quot;;
		    lr_endereco[&quot;bairro_cobr_entga&quot;] = getValueForm( &quot;bairro_ent&quot;, getValueForm( &quot;bairro_ent_sel&quot;, &quot;&quot; ) )+&quot;&quot;;
		    lr_endereco[&quot;cod_cidade_end_cob&quot;] = getValueForm( &quot;cod_cidade_ent&quot;, &quot;&quot; )+&quot;&quot;;
		    lr_endereco[&quot;cod_cep_end_cob&quot;] = getValueForm( &quot;cep_ent&quot;, &quot;&quot; )+&quot;&quot;;
		    
		    params[&quot;lr_endereco&quot;] = lr_endereco;
		    data[&quot;params&quot;] = params;
		    
		    log.info(&quot;## antes do stringify ## &quot;+data.toString() );
		    var jj = JSON.stringify( data );
	
		    log.info(&quot;## RESULT POST jj ## &quot;+ jj );
		    var vo = clientService.invoke( jj );
		    
		    if(vo.getResult()== &quot;&quot; || vo.getResult().isEmpty()){
		        throw &quot;Retorno está vazio&quot;;
		    }
		}
	} catch(err) {
	    msg_erro += err.toString();
	}
	
	if (  msg_erro != &quot;&quot; ){
		throw msg_erro;
	}
	
	function getValueForm( campo, padrao ){
		log.info( &quot;Campo........&quot;+campo );
		var valor = hAPI.getCardValue( campo );
		if( padrao == &quot;tipoPessoa&quot; ) 
			if ( valor.indexOf(&quot;/0000-&quot;) == -1 )
				valor = &quot;F&quot;;
			else
				valor = &quot;J&quot;;
		log.info( &quot;Valor........&quot;+valor );
		if ( valor == &quot;&quot; ){
			valor = padrao;
			log.info( &quot;Valor padrao........&quot;+valor );
		}
		return valor;
	}
	
	function setComment( user, processo, comentario ){
		 var constraints = new Array();
		 constraints.push( DatasetFactory.createConstraint( &apos;processo&apos;, processo, processo, ConstraintType.MUST) );
		 constraints.push( DatasetFactory.createConstraint( &apos;user&apos;, user, user, ConstraintType.MUST) );
		 constraints.push( DatasetFactory.createConstraint( &apos;comentario&apos;, comentario, comentario, ConstraintType.MUST) );
	    var dataset = DatasetFactory.getDataset( &apos;setComent&apos;, null, constraints, null);
		if ( dataset != null ){
			return dataset.getValue(0, &apos;retorno&apos; );
		}
	}
	
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>beforeTaskSave</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function beforeTaskSave(colleagueId,nextSequenceId,userList){&#xd;
	/*&#xd;
	var numProcesso = getValue(&apos;WKNumProces&apos;);&#xd;
	&#xd;
	hAPI.setTaskComments(colleagueId, numProcesso, 0, err.toString() );&#xd;
	*/&#xd;
	&#xd;
	function setComment( user, processo, comentario ){&#xd;
		 var constraints = new Array();&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;processo&apos;, processo, processo, ConstraintType.MUST) );&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;user&apos;, user, user, ConstraintType.MUST) );&#xd;
		 constraints.push( DatasetFactory.createConstraint( &apos;comentario&apos;, comentario, comentario, ConstraintType.MUST) );&#xd;
	    var dataset = DatasetFactory.getDataset( &apos;setComent&apos;, null, constraints, null);&#xd;
		if ( dataset != null ){&#xd;
			return dataset.getValue(0, &apos;retorno&apos; );&#xd;
		}&#xd;
	}&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>scripttask63</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function scripttask63() {
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>servicetask12</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function servicetask12(attempt, message) {

	//######### RECUPERA INFORMAÃ¿Ã¿ES DO PEDIDO DO LOGIX
	var cod_empresa = hAPI.getCardValue( &quot;empresa&quot; );
	var num_pedido = hAPI.getCardValue( &quot;num_pedido&quot; );
	var cod_cliente = hAPI.getCardValue( &quot;cod_cliente&quot; );
	var cod_repres = hAPI.getCardValue( &quot;cod_repres&quot; );
	var consistencias = hAPI.getCardValue(&apos;consistencias&apos;);
	var numProcesso = getValue(&apos;WKNumProces&apos;);
	var userId = getValue(&quot;WKUser&quot;);
	var emailAdicional = hAPI.getCardValue(&apos;emailPed&apos;);
	
	var constraints = new Array();
	constraints.push( DatasetFactory.createConstraint( &apos;cod_empresa&apos;, cod_empresa, cod_empresa, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;num_pedido&apos;, num_pedido, num_pedido, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;usuario&apos;, userId, userId, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;cod_cliente&apos;, cod_cliente, cod_cliente, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;cod_repres&apos;, cod_repres, cod_repres, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;numProcesso&apos;, numProcesso, numProcesso, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;consistencias&apos;, consistencias, consistencias, ConstraintType.MUST) );
	constraints.push( DatasetFactory.createConstraint( &apos;e_mail&apos;, emailAdicional, emailAdicional, ConstraintType.MUST) );

	var dataset = DatasetFactory.getDataset( &apos;pedido_send_mail&apos;, null, constraints, null);

	if (dataset != null) {
		if (dataset.getValue(0, &quot;result&quot;) == &apos;NOK&apos;) {
			throw &apos;Erro ao processar envio de e-mail: &apos; + dataset.getValue(0, &quot;erro&quot;);
		}
	}
	
	function setComment( user, processo, comentario ){
		 var constraints = new Array();
		 constraints.push( DatasetFactory.createConstraint( &apos;processo&apos;, processo, processo, ConstraintType.MUST) );
		 constraints.push( DatasetFactory.createConstraint( &apos;user&apos;, user, user, ConstraintType.MUST) );
		 constraints.push( DatasetFactory.createConstraint( &apos;comentario&apos;, comentario, comentario, ConstraintType.MUST) );
	    var dataset = DatasetFactory.getDataset( &apos;setComent&apos;, null, constraints, null);
		if ( dataset != null ){
			return dataset.getValue(0, &apos;retorno&apos; );
		}
	}
} </eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>servicetask2</eventId>
        <processId>inc_pedido</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function servicetask2(attempt, message) {

	var codEmpresa = getValueForm(&quot;empresa&quot;, &quot;&quot;);
	var itemSolicAcum = {};
	var dataHora = new Date();

	var numProcesso = getValue(&apos;WKNumProces&apos;);
	var userId = getValue(&quot;WKUser&quot;);

	var maxDataEnt = new Date();
	var maxDataEntCalc = new Date();

	var format = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;);
	var sdt = new java.text.SimpleDateFormat(&quot;yyMMdd&quot;);

	// var indexItens = form.getChildrenIndexes(&quot;ped_itens&quot;);
	// log.info( &apos;Loop Itens..............&apos;+indexItens.length );
	// for (var i = 0; i &lt; indexItens.length; i++) {
	var camposItem = hAPI.getCardData(getValue(&quot;WKNumProces&quot;));
	var contadorItem = camposItem.keySet().iterator();
	log.info(&apos;Antes While. &apos; + camposItem);
	log.info(&apos;Antes While..... &apos; + contadorItem.hasNext());

	// BUSCA EMPRESA
	log.info(&apos;Evento Processo ..... 001&apos;);
	var c1 = DatasetFactory.createConstraint(&quot;cod_empresa&quot;, codEmpresa,
			codEmpresa, ConstraintType.MUST);
	var constraints = new Array(c1);
	var dataset = DatasetFactory.getDataset(&apos;empresa&apos;, null, constraints, null);
	var informa_aen_pedido = &quot;N&quot;;
	if (dataset != null) {
		// log.info(&apos;DATA SET...&apos;+dataset );
		informa_aen_pedido = dataset.getValue(0, &quot;informa_aen_pedido&quot;);
	}

	log.info(&apos;Evento Processo ..... 002&apos;);
	// BUSCA AEN REPRES
	var aen_repres = &quot;00000000&quot;;
	informa_aen_pedido = informa_aen_pedido.trim();
	log.info(&apos;AEN INFORMAR1......&apos; + informa_aen_pedido);
	if (informa_aen_pedido == &quot;S&quot;) {
		log.info(&apos;Evento Processo ..... 001 A...&apos;
				+ getValueForm(&quot;cod_repres&quot;, &quot;0&quot;) + &apos;...&apos;);
		var c1 = DatasetFactory.createConstraint(&quot;cod_repres&quot;, getValueForm(
				&quot;cod_repres&quot;, &quot;0&quot;), getValueForm(&quot;cod_repres&quot;, &quot;0&quot;),
				ConstraintType.MUST);
		log.info(&apos;Evento Processo..... 001 B&apos;);
		var constraints = new Array(c1);
		log.info(&apos;Evento Processo ..... 001 C&apos;);
		var dataset = DatasetFactory.getDataset(&apos;representante_compl&apos;, null,
				constraints, null);
		log.info(&apos;Evento Processo ..... 001 D&apos;);
		if (dataset != null) {
			// log.info(&apos;DATA SET...&apos;+dataset );
			log.info(&apos;Evento Processo ..... 001 E &apos; + dataset.values.length);
			aen_repres = dataset.getValue(0, &quot;cod_aen&quot;);
		} else {
			log.info(&apos;Evento Processo ..... 001F&apos;);
			aen_repres = &quot;00000000&quot;;
		}
	}

	log.info(&apos;AEN INFORMAR2......&apos; + informa_aen_pedido);
	log.info(&apos;AEN REPRES......&apos; + aen_repres);

	/* try { */

	while (contadorItem.hasNext()) {
		log.info(&apos;ENTREIII O M &apos;);
		var idItem = contadorItem.next();
		log.info(&apos;Campo. &apos; + idItem);
		var campo = idItem.split(&apos;___&apos;)[0];
		var seqItem = idItem.split(&apos;___&apos;)[1];
		log.info(&apos;Seq. &apos; + seqItem);
		if (seqItem != undefined &amp;&amp; campo == &quot;COD_ITEM&quot;) {
			log.info(&apos;Sequencia.....&apos; + seqItem);

			var codItem = getValueForm(&quot;cod_item___&quot; + seqItem, &quot;&quot;) + &quot;&quot;;

			log.info(&apos;Item C.... &apos; + codItem);
			if (itemSolicAcum[codItem] == null || itemSolicAcum[codItem] == NaN) {
				itemSolicAcum[codItem] = 0.0;
			}

			var qtd = Math.round( getValueFormFloat( &quot;quantidade___&quot; + seqItem, 0) * 1000) / 1000;
			if (qtd == null) {
				qtd = 0;
			}

			itemSolicAcum[codItem] += qtd;
			log.info(&apos;Par Quantidade C.... &apos; + itemSolicAcum[codItem]);

			dataEnt = format
					.parse(getValueForm(&quot;data_entrega___&quot; + seqItem, &quot;&quot;).split(
							&quot;-&quot;).reverse().join(&quot;/&quot;));

			var dataEntCalc = calcDataEntrega(codEmpresa, codItem, dataHora,
					itemSolicAcum[codItem]);
			dataEntCalc = new Date(dataEntCalc.getYear() + 2000, dataEntCalc
					.getMonth(), dataEntCalc.getDate());
			dataEntCalc = new Date(dataEntCalc.getYear() + 1900, dataEntCalc
					.getMonth(), dataEntCalc.getDate());

			log.info(&apos;DATA ENT.... &apos; + sdt.format(dataEnt));
			log.info(&apos;DATA ENT MAX.... &apos; + sdt.format(maxDataEnt));
			if (sdt.format(maxDataEnt) &lt; sdt.format(dataEnt)) {
				maxDataEnt = dataEnt;
				log.info(&apos;Data de entrega maior&apos;);
			} else {
				log.info(&apos;Data de entrega menor&apos;);
			}

			log.info(&apos;DATA CALC.... &apos; + sdt.format(dataEntCalc));
			log.info(&apos;DATA CALC MAX.... &apos; + sdt.format(maxDataEntCalc));
			if (sdt.format(maxDataEntCalc) &lt; sdt.format(dataEntCalc)) {
				maxDataEntCalc = dataEntCalc;
				log.info(&apos;Data de calculada maior&apos;);
			} else {
				log.info(&apos;Data de calculada menor&apos;);
			}

			var dataAjut = &apos;20&apos; + sdt.format(dataEntCalc);
			var sdt4 = new java.text.SimpleDateFormat(&quot;yyyyMMdd&quot;);

			hAPI.setCardValue(&quot;data_entrega_calc___&quot; + seqItem, format
					.format(sdt4.parse(dataAjut)));

			log.info(&quot;Read &quot; + &quot;data_entrega_calc___&quot; + seqItem);
			log.info(&quot;Read &quot;
					+ getValueForm(&quot;data_entrega_calc___&quot; + seqItem, &quot;&quot;));
		}
	}
	log.info(&apos;DATA ENT MAX FINAL.... &apos; + sdt.format(maxDataEnt));
	log.info(&apos;DATA CALC MAX FINAL.... &apos; + sdt.format(maxDataEntCalc));

	log.info(&quot;## RESULT POST 2 ## &quot;);
	log.info(&quot;## RESULT POST 2X ## &quot;);
	var clientService = fluigAPI.getAuthorizeClientService();
	log.info(&quot;## RESULT POST 21 ## &quot;);
	var data = {
		companyId : getValue(&quot;WKCompany&quot;) + &quot;&quot;,
		serviceCode : &quot;Logix_PRD&quot;,
		endpoint : &quot;/logixrest/vdpr0001/incluiPedidoVenda&quot;,
		timeoutService : &quot;240&quot;
	// method : &quot;post&quot; //&quot;post&quot;, &quot;delete&quot;, &quot;patch&quot;, &quot;put&quot;, &quot;get&quot;
	};
	log.info(&quot;## RESULT POST 22 ## &quot;);
	// if ( form.getValue( &apos;tipo_cadastro&apos; ) == &apos;A&apos;){
	// data[&quot;method&quot;] = &quot;put&quot;; //&quot;post&quot;, &quot;delete&quot;, &quot;patch&quot;, &quot;post&quot;, &quot;get&quot;
	// }else{
	data[&quot;method&quot;] = &quot;post&quot;; // &quot;post&quot;, &quot;delete&quot;, &quot;patch&quot;, &quot;put&quot;, &quot;get&quot;
	//data[&quot;charset&quot;] = &quot;utf-8&quot;;
	log.info(&quot;## RESULT POST 23 ## &quot;);
	log.info(&quot;## DADOS CABECALHO ##&quot;);
	var headers = {};
	headers[&quot;Content-Type&quot;] = &quot;application/json;charset=UTF-8&quot;;
	data[&quot;headers&quot;] = headers;
	log.info(&quot;dados header&quot; + headers);
	log.info(&quot;## PASSOU DADOS CABECALHO ##&quot;);
	
	var options = {};
	options[&quot;encoding&quot;] = &quot;UTF-8&quot;;
	options[&quot;mediaType&quot;] = &quot;application/json&quot;;
	
	// }
	data[&quot;options&quot;] = options;
	var params = {};

	var lr_parametros = {};
	lr_parametros[&quot;consistir_pedido&quot;] = &quot;S&quot;;
	params[&quot;lr_parametros&quot;] = lr_parametros;

	var lr_principal = {};
	lr_principal[&quot;cod_empresa&quot;] = getValueForm(&quot;empresa&quot;, &quot;&quot;) + &quot;&quot;;
	lr_principal[&quot;num_pedido&quot;] = 0;
	var cod_cliente = getValueForm(&quot;cod_cliente&quot;, &quot;&quot;);
	lr_principal[&quot;cod_cliente&quot;] = cod_cliente + &quot;&quot;;
	lr_principal[&quot;dat_emis_repres&quot;] = getValueForm(&quot;data_emissao&quot;, &quot;&quot;).split(
			&quot;/&quot;).reverse().join(&quot;-&quot;);
	lr_principal[&quot;cod_nat_oper&quot;] = getValueForm(&quot;nat_operacao&quot;, &quot;&quot;) + &quot;&quot;;

	// 1- Se a
	// InscriÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â§Ã&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â£o
	// Estadual estiver em &quot;BRANCO&quot; ou com a
	// palavra &quot;ISENTO&quot; o campo Finalidade deverÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â¡
	// ser = 2&quot;.
	// 2- Se a IE estiver com numeros o campo finalidade
	// deverÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â¡ ser =
	// &quot;1&quot;.
	// 3- Se a IE estiver com nÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Âºmeros e o campo
	// Classe estiver
	// preenchida com &quot;U&quot;
	// o campo Finalidade deverÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â¡ ser = &quot;3&quot;.
	// também se o tipo de fornecedor no vdp10000 estiver como microempresa
	// individual e estiver isento ou vazio
	// será gravado como finalidade 3
	// 4 - se tiver inscricao estadual, estivo como U na classe, porém nos parametros do VDP10000
	// GERAL estiver como não contribuinte irá gravar 2
	// 5 - Se não tiver inscricao estadual, porém o campo eh contribuinte da aba 2 dos parametros
	// do vdp10000 estiver como eh_contribuinte e a classe não for U o campo finalidade irá receber 1

	if (getValueForm(&quot;ins_estadual&quot;, &quot;&quot;) == &quot;&quot;
			|| getValueForm(&quot;ins_estadual&quot;, &quot;&quot;) == null
			|| getValueForm(&quot;ins_estadual&quot;, &quot;&quot;) == undefined) {
		var c1 = DatasetFactory.createConstraint(&quot;cod_cliente&quot;, cod_cliente,
				cod_cliente, ConstraintType.MUST);
		var constraints = new Array(c1);
		var dataset = DatasetFactory.getDataset(&apos;cliente_rest&apos;, null,
				constraints, null);
		var informa_aen_pedido = &quot;N&quot;;
		if (dataset != null) {
			// log.info(&apos;DATA SET...&apos;+dataset );
			hAPI.setCardValue(&quot;ins_estadual&quot;, dataset.getValue(0,
					&quot;ins_estadual&quot;));
		}
	}

	var insEstadual = getValueForm(&quot;ins_estadual&quot;, &quot;&quot;).replace(&quot;[^0-9]&quot;, &quot;&quot;).trim();
	var iesTipFornec = getValueForm(&quot;ies_tip_fornec&quot;, &quot;&quot;).trim();
	log.info(&quot;## INSCRICAO ## &quot; + insEstadual);
	log.info(&quot;## COD_CLASS ## &quot; + getValueForm(&quot;cod_class&quot;, &quot;A&quot;));
	var finalidade = &quot;1&quot;;
	log.info(&quot;## FINALIDADE ## 0001&quot;);
	if (iesTipFornec == &quot;I&quot;
			&amp;&amp; (insEstadual == &quot;&quot; || insEstadual == null || insEstadual == &quot;ISENTO&quot;)) {
		finalidade = &quot;3&quot;;
		log.info(&quot;## FINALIDADE ## 0004&quot;);
	} else if ((getValueForm(&quot;cod_class&quot;, &quot;A&quot;) != &quot;U&quot; || getValueForm(&quot;cod_class&quot;, &quot;A&quot;) != &quot;u&quot;) 
				&amp;&amp; (insEstadual == &quot;&quot; || insEstadual == null || insEstadual == &quot;ISENTO&quot;)  
				&amp;&amp; ((getValueForm(&quot;eh_contribuinte&quot;, &quot;A&quot;)) == &apos;S&apos;)){
						finalidade = &quot;1&quot;;
						log.info(&quot;## FINALIDADE ## 0005&quot;);
	} else if (insEstadual == &quot;&quot; || insEstadual == null
			|| insEstadual == &quot;ISENTO&quot;) {
		finalidade = &quot;2&quot;;
		log.info(&quot;## FINALIDADE ## 0002&quot;);
	} else if ((getValueForm(&quot;cod_class&quot;, &quot;A&quot;)) == &quot;U&quot; &amp;&amp; insEstadual != &quot;&quot; &amp;&amp; insEstadual != null &amp;&amp; insEstadual != &quot;ISENTO&quot; &amp;&amp; (getValueForm(&quot;eh_contribuinte&quot;, &quot;A&quot;)) == &apos;N&apos;){
			finalidade = &apos;2&apos;;
			log.info(&apos;## FINALIDADE ## 0004&apos;);
	} else if ((getValueForm(&quot;cod_class&quot;, &quot;A&quot;) == &quot;U&quot; || getValueForm(
			&quot;cod_class&quot;, &quot;A&quot;) == &quot;u&quot;)
			&amp;&amp; (insEstadual != &quot;&quot; || insEstadual != null || insEstadual != &quot;ISENTO&quot;)) {
		finalidade = &quot;3&quot;;
		log.info(&quot;## FINALIDADE ## 0003&quot;);
	} 
		
	 
	

	log.info(&quot;## FIANALIDADE ## &quot; + finalidade);

	lr_principal[&quot;ies_finalidade&quot;] = finalidade + &quot;&quot;;
	lr_principal[&quot;cod_cnd_pgto&quot;] = getValueForm(&quot;cond_pagamento&quot;, &quot;0&quot;) + &quot;&quot;;
	lr_principal[&quot;ies_tip_entrega&quot;] = getValueForm(&quot;tipo_entrega&quot;, &quot;0&quot;) + &quot;&quot;;
	lr_principal[&quot;cod_tip_venda&quot;] = getValueForm(&quot;tipo_venda&quot;, &quot;1&quot;) + &quot;&quot;;
	lr_principal[&quot;cod_tip_carteira&quot;] = getValueForm(&quot;cod_tip_carteira_cli&quot;,
			&quot;01&quot;)
			+ &quot;&quot;;

	params[&quot;lr_principal&quot;] = lr_principal;

	var lr_representante = {};
	lr_representante[&quot;ies_comissao&quot;] = getValueForm(&quot;ies_emite_dupl&quot;, &quot;S&quot;) + &quot;&quot;;
	lr_representante[&quot;cod_repres&quot;] = getValueForm(&quot;cod_repres&quot;, &quot;0&quot;) + &quot;&quot;;
	lr_representante[&quot;pct_comissao&quot;] = 0;
	lr_representante[&quot;cod_repres_adic&quot;] = &quot;&quot;;
	lr_representante[&quot;pct_comissao_2&quot;] = 0;
	lr_representante[&quot;cod_repres_3&quot;] = &quot;&quot;;
	lr_representante[&quot;pct_comissao_3&quot;] = 0;

	params[&quot;lr_representante&quot;] = lr_representante;

	var lr_adicionais = {};
	lr_adicionais[&quot;num_pedido_repres&quot;] = getValue(&quot;WKNumProces&quot;) + &quot;&quot;;
	lr_adicionais[&quot;num_pedido_cli&quot;] = getValueForm(&quot;ped_cliente&quot;, &quot;&quot;) + &quot;&quot;;
	lr_adicionais[&quot;cod_local_estoq&quot;] = &quot;&quot;;
	lr_adicionais[&quot;pedido_pallet&quot;] = &quot;N&quot;;
	lr_adicionais[&quot;pct_tolera_minima&quot;] = 0;
	lr_adicionais[&quot;pct_tolera_maxima&quot;] = 0;
	lr_adicionais[&quot;dat_min_fat&quot;] = &quot;&quot;;
	lr_adicionais[&quot;nota_empenho&quot;] = &quot;&quot;;
	lr_adicionais[&quot;contrato_compra&quot;] = &quot;&quot;;
	lr_adicionais[&quot;forma_pagto&quot;] = &quot;&quot;;
	lr_adicionais[&quot;processo_export&quot;] = &quot;&quot;;
	lr_adicionais[&quot;numero_cno_esocial&quot;] = &quot;&quot;;
	lr_adicionais[&quot;cnpj_cpf_subempreiteiro&quot;] = &quot;&quot;;

	params[&quot;lr_adicionais&quot;] = lr_adicionais;

	// tipo_frete_logix

	var lr_frete = {};

	if (getValueForm(&quot;tipo_frete&quot;, &quot;&quot;) == &quot;RET&quot;) {
		lr_frete[&quot;cod_transpor&quot;] = getValueForm(&quot;cod_cliente&quot;, &quot;&quot;) + &quot;&quot;;
	} else {
		lr_frete[&quot;cod_transpor&quot;] = getValueForm(&quot;cod_trans&quot;, &quot;&quot;) + &quot;&quot;;
	}
	lr_frete[&quot;cod_consig&quot;] = &quot;&quot;;
	log.info(&apos; informação de tipo de frete no formulário..... &apos;
			+ getValueForm(&quot;tipo_frete_logix&quot;, &quot;x&quot;));
	lr_frete[&quot;ies_frete&quot;] = getValueForm(&quot;tipo_frete_logix&quot;, &quot;1&quot;) + &quot;&quot;;
	log.info(&apos; informação de tipo de frete no json..... &apos;
			+ lr_frete[&quot;ies_frete&quot;]);
	lr_frete[&quot;ies_embal_padrao&quot;] = &quot;2&quot;;
	lr_frete[&quot;pct_frete&quot;] = 0 + &quot;&quot;;

	params[&quot;lr_frete&quot;] = lr_frete;

	var lr_preco_desconto = {};
	lr_preco_desconto[&quot;ies_preco&quot;] = &quot;F&quot;;
	lr_preco_desconto[&quot;pct_desc_financ&quot;] = getValueFormFloat(&quot;pct_desc_financ&quot;, &quot;0&quot;)+&quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_adic&quot;] = getValueFormFloat(&quot;pct_desc_adicional&quot;,&quot;0&quot;)+&quot;&quot;;
	lr_preco_desconto[&quot;num_list_preco&quot;] = getValueForm(&quot;lista_preco&quot;, &quot;&quot;) + &quot;&quot;;
	lr_preco_desconto[&quot;cod_moeda&quot;] = getValueForm(&quot;moeda&quot;, &quot;&quot;) + &quot;&quot;;
	if (getValueForm(&quot;tipo_desconto&quot;, &quot;&quot;) == &quot;&quot;) {
		lr_preco_desconto[&quot;tip_desc&quot;] = null;
	} else {
		lr_preco_desconto[&quot;tip_desc&quot;] = getValueForm(&quot;tipo_desconto&quot;, &quot;&quot;) + &quot;&quot;;
	}
	lr_preco_desconto[&quot;pct_desc_1&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_2&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_3&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_4&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_5&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_6&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_7&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_8&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_9&quot;] = 0.0 + &quot;&quot;;
	lr_preco_desconto[&quot;pct_desc_10&quot;] = 0.0 + &quot;&quot;;
	
	var dataHora = new Date();
	var sdt5 = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;);
	var dataAtual = sdt5.format(dataHora);
	
	
	//ajusta a cotacao caso ela venha vazia na integracao
		if(hAPI.getCardValue(&quot;moeda&quot;) != &quot;1&quot; ) {
			log.info(&apos;comecou o ajuste da cotacao da moeda porque veio sem nada!!! &apos;+hAPI.getCardValue(&quot;cotacao&quot;).replace(&apos;.&apos;,&apos;&apos;).replace(&apos;,&apos;,&apos;.&apos;));
			if ( hAPI.getCardValue(&quot;cotacao&quot;).replace(&apos;.&apos;,&apos;&apos;).replace(&apos;,&apos;,&apos;.&apos;) == null || 
					hAPI.getCardValue(&quot;cotacao&quot;).replace(&apos;.&apos;,&apos;&apos;).replace(&apos;,&apos;,&apos;.&apos;) == 0 || 
					hAPI.getCardValue(&quot;cotacao&quot;).replace(&apos;.&apos;,&apos;&apos;).replace(&apos;,&apos;,&apos;.&apos;) == 0.00) {
				log.info(&apos;entrou no ajuste da cotacao da moeda porque veio sem nada!!!&apos;);
				
				log.info(&apos;entrou no ajuste da cotacao da moeda porque veio sem nada 2 !!! &apos;+ getValueForm(&quot;moeda&quot;, &quot;&quot;)+&quot; &quot;+getValueForm(&quot;data_emissao&quot;, &quot;&quot;));
				var c1 = DatasetFactory.createConstraint(&quot;cod_moeda&quot;, getValueForm(&quot;moeda&quot;, &quot;&quot;),getValueForm(&quot;moeda&quot;, &quot;&quot;), ConstraintType.MUST);
				var c2 = DatasetFactory.createConstraint(&quot;dat_ref&quot;, getValueForm(&quot;data_emissao&quot;, &quot;&quot;),getValueForm(&quot;data_emissao&quot;, &quot;&quot;), ConstraintType.MUST);
				var c3 = DatasetFactory.createConstraint(&quot;table&quot;, &apos;eis_v_cotacao_moeda&apos;,null, ConstraintType.MUST);
				var constraints = new Array(c1,c2,c3);
				var dataset = DatasetFactory.getDataset(&apos;selectLogix&apos;, null,constraints, null);
				log.info(&apos;entrou no ajuste da cotacao da moeda porque veio sem nada 3 !!! &apos;+dataset.getValue(0,&quot;val_cotacao&quot;));
				
				if (dataset != null) {
					// log.info(&apos;DATA SET...&apos;+dataset );
					log.info(&apos;cotacao encontrada &apos;+dataset.getValue(0,&quot;val_cotacao&quot;));
					hAPI.setCardValue(&quot;cotacao&quot;, dataset.getValue(0,&quot;val_cotacao&quot;).replace(&apos;.&apos;,&apos;,&apos;));
				}
		
			}
		}
	//fim ajusta cotacao caso venha vazia nesse momento	
	
	if( hAPI.getCardValue(&quot;moeda&quot;) != &quot;1&quot; ){
		lr_preco_desconto[&quot;regra_cotacao&quot;] = &quot;F&quot;;
		lr_preco_desconto[&quot;val_cotacao_fixa&quot;] = getValueFormFloat(&quot;cotacao&quot;,&quot;1&quot;)+ &quot;&quot;;
		lr_preco_desconto[&quot;data_vigencia&quot;] = dataAtual.split(&quot;/&quot;).reverse().join(&quot;-&quot;);			
	} else {
		lr_preco_desconto[&quot;regra_cotacao&quot;] = &quot;P&quot;;
		lr_preco_desconto[&quot;val_cotacao_fixa&quot;] = &quot;&quot;;
		lr_preco_desconto[&quot;data_vigencia&quot;] = &quot;&quot;;
	}
	

	params[&quot;lr_preco_desconto&quot;] = lr_preco_desconto;

	var lr_entrega = {};
	lr_entrega[&quot;num_sequencia&quot;] = &quot;&quot;;
	if (getValueForm(&quot;endereco_ent&quot;, &quot;&quot;) != &quot;&quot;) {
		lr_entrega[&quot;end_entrega&quot;] = getValueForm(&quot;tipo_logradouro_ent&quot;, &quot;&quot;)
				+ &quot; &quot; + getValueForm(&quot;endereco_ent&quot;, &quot;&quot;) + &quot;, &quot;
				+ getValueForm(&quot;numero_ent&quot;, &quot;&quot;) + &quot;&quot;;
		lr_entrega[&quot;den_bairro&quot;] = getValueForm(&quot;bairro_ent&quot;, getValueForm(
				&quot;bairro_ent_sel&quot;, &quot;&quot;))
				+ &quot;&quot;;
		lr_entrega[&quot;cod_cidade&quot;] = getValueForm(&quot;cod_cidade_ent&quot;, &quot;&quot;) + &quot;&quot;;
		lr_entrega[&quot;cod_cep&quot;] = getValueForm(&quot;cep_ent&quot;, &quot;&quot;) + &quot;&quot;;
		lr_entrega[&quot;num_cgc&quot;] = getValueForm(&quot;cnpj_ent&quot;, &quot;&quot;) + &quot;&quot;;
		lr_entrega[&quot;ins_estadual&quot;] = getValueForm(&quot;ie_ent&quot;, &quot;&quot;) + &quot;&quot;;
		lr_entrega[&quot;nom_cliente_end_ent&quot;] = getValueForm(&quot;razao_social&quot;, &quot;&quot;)
				+ &quot;&quot;;
	} else {
		lr_entrega[&quot;end_entrega&quot;] = &quot;&quot;;
		lr_entrega[&quot;den_bairro&quot;] = &quot;&quot;;
		lr_entrega[&quot;cod_cidade&quot;] = &quot;&quot;;
		lr_entrega[&quot;cod_cep&quot;] = &quot;&quot;;
		lr_entrega[&quot;num_cgc&quot;] = &quot;&quot;;
		lr_entrega[&quot;ins_estadual&quot;] = &quot;&quot;;
		lr_entrega[&quot;nom_cliente_end_ent&quot;] = &quot;&quot;;
	}

	params[&quot;lr_entrega&quot;] = lr_entrega;

	var lr_textos_pedido = {};

	lr_textos_pedido[&quot;tex_observ_1&quot;] = getValueForm(&quot;texto_pedido_1&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;tex_observ_2&quot;] = getValueForm(&quot;texto_pedido_2&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;den_texto_1&quot;] = getValueForm(&quot;texto_nf_1&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;den_texto_2&quot;] = getValueForm(&quot;texto_nf_2&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;den_texto_3&quot;] = getValueForm(&quot;texto_nf_3&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;den_texto_4&quot;] = getValueForm(&quot;texto_nf_4&quot;, &quot;&quot;) + &quot;&quot;;
	lr_textos_pedido[&quot;den_texto_5&quot;] = getValueForm(&quot;texto_nf_5&quot;, &quot;&quot;) + &quot;&quot;;

	params[&quot;lr_textos_pedido&quot;] = lr_textos_pedido;

	var lst_la_pedido_itens = [];

	var lst_la_aen_pedido = [];

	// var indexItens = form.getChildrenIndexes(&quot;ped_itens&quot;);
	// log.info( &apos;Contatos..............&apos;+indexItens.length );
	// for (var i = 0; i &lt; indexItens.length; i++) { 
	var camposItem = hAPI.getCardData(getValue(&quot;WKNumProces&quot;));
	var contadorItem = camposItem.keySet().iterator();
	var i = 0;
	while (contadorItem.hasNext()) {
		var idItem = contadorItem.next();
		var campo = idItem.split(&apos;___&apos;)[0];
		var seqItem = idItem.split(&apos;___&apos;)[1];
		if (seqItem != undefined &amp;&amp; campo == &quot;COD_ITEM&quot;) {
			i += 1;
			var la_pedido_itens = {};

			la_pedido_itens[&quot;ind_bonificacao&quot;] = &quot;N&quot;;
			la_pedido_itens[&quot;sequencia_item&quot;] = i + &quot;&quot;;
			la_pedido_itens[&quot;cod_item&quot;] = getValueForm(&quot;cod_item___&quot; + seqItem,
					&quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_adic&quot;] = getValueFormFloat(&quot;desconto___&quot;+ seqItem, &quot;0&quot;)+&quot;&quot;;
			la_pedido_itens[&quot;pre_unit&quot;] = getValueFormFloat(&quot;valor_unit___&quot;+ seqItem, &quot;0&quot;)+&quot;&quot;;
			la_pedido_itens[&quot;qtd_pecas_solic&quot;] = getValueFormFloat(&quot;quantidade___&quot;+ seqItem, &quot;0&quot;)+&quot;&quot;;

			var dataEntrega = format.parse(getValueForm(
					&quot;data_entrega___&quot; + seqItem, &quot;&quot;).split(&quot;-&quot;).reverse().join(
					&quot;/&quot;));
			var dataEntregaCal = format.parse(getValueForm(
					&quot;data_entrega_calc___&quot; + seqItem, &quot;&quot;));

			if (getValueForm(&quot;tipo_entrega&quot;, &quot;0&quot;) == &apos;1&apos;) {
				if (sdt.format(maxDataEnt) &gt; sdt.format(maxDataEntCalc)) {
					dataEntrega = maxDataEnt;
				} else {
					dataEntrega = maxDataEntCalc;
				}
			} else {
				if (sdt.format(dataEntregaCal) &gt; sdt.format(dataEntrega)) {
					dataEntrega = dataEntregaCal;
				}
			}

			var dataAjut = &apos;20&apos; + sdt.format(dataEntrega);
			var sdt4 = new java.text.SimpleDateFormat(&quot;yyyyMMdd&quot;);

			//log.info(&apos;DATA ENVIO.... &apos; + format.format(sdt4.parse(dataAjut)));

			la_pedido_itens[&quot;prz_entrega&quot;] = format
					.format(sdt4.parse(dataAjut)).split(&quot;/&quot;).reverse()
					.join(&quot;-&quot;)
					+ &quot;&quot;;

			log.info(&apos;DATA OBEJTO.... &apos; + la_pedido_itens[&quot;prz_entrega&quot;]);

			la_pedido_itens[&quot;val_frete_unit&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;val_seguro_unit&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_1&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_2&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_3&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_4&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_5&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_6&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_7&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_8&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_9&quot;] = 0 + &quot;&quot;;
			la_pedido_itens[&quot;pct_desc_10&quot;] = 0 + &quot;&quot;;

			la_pedido_itens[&quot;den_texto_1&quot;] = getValueForm(&quot;obs_item_1___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;den_texto_2&quot;] = getValueForm(&quot;obs_item_2___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;den_texto_3&quot;] = getValueForm(&quot;obs_item_3___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;den_texto_4&quot;] = getValueForm(&quot;obs_item_4___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;den_texto_5&quot;] = getValueForm(&quot;obs_item_5___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;xped&quot;] = getValueForm(&quot;pedido_cli_item___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;
			la_pedido_itens[&quot;nitemped&quot;] = getValueForm(&quot;seq_pedido_cli_item___&quot;
					+ seqItem, &quot;&quot;)
					+ &quot;&quot;;

			lst_la_pedido_itens.push(la_pedido_itens);

			// trata aen
			if (aen_repres != &quot;00000000&quot; &amp;&amp; informa_aen_pedido == &quot;S&quot;) {
				var la_aen_pedido = {};
				// la_aen_pedido[&quot;empresa&quot;] =
				// la_aen_pedido[&quot;pedido&quot;] =
				la_aen_pedido[&quot;sequencia_item&quot;] = i + &quot;&quot;;
				la_aen_pedido[&quot;linha_produto&quot;] = aen_repres.substring(0, 2)
						+ &quot;&quot;;
				la_aen_pedido[&quot;linha_receita&quot;] = aen_repres.substring(2, 4)
						+ &quot;&quot;;
				la_aen_pedido[&quot;segmto_mercado&quot;] = aen_repres.substring(4, 6)
						+ &quot;&quot;;
				la_aen_pedido[&quot;classe_uso&quot;] = aen_repres.substring(6, 8) + &quot;&quot;;
				lst_la_aen_pedido.push(la_aen_pedido);
			}

		}
	}

	params[&quot;la_pedido_itens&quot;] = lst_la_pedido_itens;

	if (aen_repres != &quot;00000000&quot; &amp;&amp; informa_aen_pedido == &quot;S&quot;) {
		params[&quot;la_aen_pedido&quot;] = lst_la_aen_pedido;
	} else {
		params[&quot;la_aen_pedido&quot;] = {};
	}

	params[&quot;lr_retirada&quot;] = {};
	params[&quot;lr_compl_nfe&quot;] = {};
	params[&quot;lr_nf_referencia&quot;] = {};
	params[&quot;lr_cliente_interm&quot;] = {};
	params[&quot;lr_vendor&quot;] = {};
	params[&quot;lr_embarque&quot;] = {};
	params[&quot;la_consignatario_adic&quot;] = {};
	params[&quot;la_processo_refer&quot;] = {};
	params[&quot;la_comissao_item&quot;] = {};
	params[&quot;la_pedido_exportacao&quot;] = {};
	params[&quot;la_remessa_item&quot;] = {};
	params[&quot;la_grades_item&quot;] = {};
	params[&quot;la_prazo_grade&quot;] = {};

	data[&quot;params&quot;] = params;

	log.info(&quot;## antes do stringify ## &quot; + data.toString());
	var jj = JSON.stringify(data);

	log.info(&quot;## RESULT POST jj ## &quot; + jj);
	try {
		var vo = clientService.invoke(jj);

		if (vo.getResult() == &quot;&quot; || vo.getResult().isEmpty()) {
			setComment(userId, numProcesso, &quot;Retorno esta vazio!&quot;);
			throw &quot;Retorno esta vazio&quot;;
		} else {

			// var jr = JSON.parse( vo.getResult() );
			log.info(&quot;## RESULT POST res ## &quot; + vo.getResult());

			var jr = JSON.parse(vo.getResult());
			log.info(&quot;## QUANT. ## &quot; + jr.data.count_mensagens);
			if (jr.data.count_mensagens == null) {
				setComment(userId, numProcesso, &apos;Nao foi recebido retorno do servidor Logix!&apos;);
				throw &apos;Nao foi recebido retorno do servidor Logix!&apos;;
			} else if (jr.data.count_mensagens != 0) {
				var msg = &apos;Ocorreu erro no processamento do servidor Logix!\n&apos;;
				var msgFrm = &apos;&apos;;
				// msg += jr.data.mensagens[0].texto;
				for (var y = 0; y &lt; jr.data.count_mensagens; y++) {
					log.info(&quot;## YYYYYY ## &quot; + y);
					msg += jr.data.mensagens[y].texto + &quot;\n&quot;;
					msgFrm += jr.data.mensagens[y].texto + &quot;#BR#&quot;;
				}
				var msgs = new String(msg);
				// msgs = msgs.replace( /||||/g, &apos;\n&apos;).replace( /||/, &apos;&apos;);
				log.info(&quot;## RESULT POST MSG ## &quot; + msgs);
				if (jr.data.sit_pedido == null) {
					setComment(userId, numProcesso, msgs);
					throw msgs;
				} else {
					hAPI.setCardValue(&quot;consistencias&quot;, msgFrm);
				}
			}
			hAPI.setCardValue(&quot;sit_pedido&quot;, jr.data.sit_pedido);
			hAPI.setCardValue(&quot;num_pedido&quot;, jr.data.pedido);
			var sit_pedido = hAPI.getCardValue(&quot;sit_pedido&quot;);
			log.info(&quot;## SIT_PEDIDO ## &quot; + sit_pedido);
			var num_pedido = hAPI.getCardValue(&quot;num_pedido&quot;);
			log.info(&quot;## NUM_PEDIDO ## &quot; + num_pedido);
			var comentario = (&quot;Pedido &quot; + num_pedido + &quot;  incluido no Logix com situacao (&quot; + sit_pedido + &quot;) !&quot;);
			hAPI.setTaskComments(userId, numProcesso, 0, comentario);
		}
	} catch (e) {

		log.info(&quot;ERROOOOOO&quot; + e.toString());

		var constraints = new Array();
		constraints.push(DatasetFactory.createConstraint(&apos;dataBase&apos;, &apos;java:/jdbc/LogixPRD&apos;, null, ConstraintType.MUST));
		constraints.push(DatasetFactory.createConstraint(&apos;table&apos;, &apos;pedidos&apos;, null, ConstraintType.MUST));
		constraints.push(DatasetFactory.createConstraint(&apos;cod_empresa&apos;, getValueForm(&quot;empresa&quot;, &quot;&quot;), getValueForm(&quot;empresa&quot;, &quot;&quot;), ConstraintType.MUST));
		constraints.push(DatasetFactory.createConstraint(&apos;num_pedido_repres&apos;, numProcesso, numProcesso, ConstraintType.MUST));
		constraints.push(DatasetFactory.createConstraint(&apos;dat_emis_repres&apos;,	getValueForm(&quot;data_emissao&quot;, &quot;&quot;), getValueForm(&quot;data_emissao&quot;, &quot;&quot;), ConstraintType.MUST));

		var filds = new Array(&apos;num_pedido&apos;, &apos;ies_sit_pedido&apos;);
		var order = new Array();

		var dataSet = DatasetFactory.getDataset(&quot;selectTable&quot;, filds, constraints, order);

		if (dataSet != null &amp;&amp; dataSet != undefined &amp;&amp; dataSet.rowsCount &gt; 0) {
			hAPI.setCardValue(&quot;sit_pedido&quot;, dataSet.getValue(0,	&apos;ies_sit_pedido&apos;));
			hAPI.setCardValue(&quot;num_pedido&quot;, dataSet.getValue(0, &apos;num_pedido&apos;));
			hAPI.setTaskComments(userId, numProcesso, 0, &quot;Pedido &quot;
					+ dataSet.getValue(0, &apos;num_pedido&apos;)
					+ &quot; *incluido no Logix com situacao (&quot;
					+ dataSet.getValue(0, &apos;ies_sit_pedido&apos;) + &quot;) !&quot;);
			log.info(&quot;Set Pedido DataSet após timeout&quot;);
		} else {
			setComment(userId, numProcesso, &apos;Erro: &apos; + e.toString());
			throw e.toString();
		}
	}

	var constraints = new Array();
	constraints.push(DatasetFactory.createConstraint(&quot;alertObjectDescription&quot;,
			&quot;Processo &quot; + numProcesso, null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;alertObjectLink&quot;,
			&quot;/pageworkflowview?app_ecm_workflowview_detailsProcessInstanceID=&quot;
					+ numProcesso, null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;alertObjectDetailKey&quot;,
			&quot;e gerou o numero de pedido &quot; + hAPI.getCardValue(&quot;num_pedido&quot;)
					+ &quot; na empresa &quot; + codEmpresa, null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(
			&quot;place_alertObjectDescription&quot;, &quot;processo de inclusao de pedidos&quot;,
			null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;eventKey&quot;,
			&quot;PROCESS_COMPLETED_TO_REQUESTER&quot;, null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;loginReceiver&quot;, hAPI
			.getCardValue(&quot;userFluig&quot;), null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;priority&quot;, &quot;HIGH&quot;, null,
			ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;WDK_TaskNumber&quot;,
			numProcesso + &quot;&quot;, null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;WDK_ProcessDescription&quot;,
			&quot;Inclusao de Pedidos (&quot; + hAPI.getCardValue(&quot;num_pedido&quot;) + &quot;) &quot;,
			null, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&quot;WDK_TaskDescription&quot;,
			&quot; Processo (&quot; + numProcesso + &quot;)&quot;, null, ConstraintType.MUST));

	DatasetFactory.getDataset(&apos;send_notification&apos;, null, constraints, null);

}
/*
 * } catch (err) { setComment(userId, numProcesso, err.toString()); throw
 * err.toString(); }
 */

function getValueForm(campo, padrao) {
	log.info(&quot;Campo........&quot; + campo);
	var valor = hAPI.getCardValue(campo);
	if (padrao == &quot;tipoPessoa&quot;)
		if (valor.indexOf(&quot;/0000-&quot;) == -1)
			valor = &quot;F&quot;;
		else
			valor = &quot;J&quot;;
	log.info(&quot;Valor........&quot; + valor);
	if (valor == &quot;&quot; || valor == &quot;&quot;) {
		valor = padrao;
		log.info(&quot;Valor padrÃ&#x83;Â&#x83;Ã&#x82;Â&#x83;Ã&#x83;Â&#x82;Ã&#x82;Â&#x83;Ã&#x83;Â&#x83;Ã&#x82;Â&#x82;Ã&#x83;Â&#x82;Ã&#x82;Â£o........&quot; + valor);
	}
	return valor;
}

function calcDataEntrega(codEmpresa, codItem, dataHora, qtd_acum) {

	var data = new Date(dataHora.getYear() + 1900, dataHora.getMonth(),
			dataHora.getDate());
	var hora = dataHora.getHours() + &quot;:&quot; + dataHora.getMinutes();
	var dataCalc = new Date(dataHora.getYear() + 1900, dataHora.getMonth(),
			dataHora.getDate());
	try {
		var contextWD = new javax.naming.InitialContext();
		var dataSourceWD = contextWD.lookup(&quot;java:/jdbc/LogixPRD&quot;);
		// var dataSourceWD = contextWD.lookup(&quot;java:/jdbc/FluigDS&quot;);
		var connectionWD = dataSourceWD.getConnection();

		var sdf = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;);
		var statementWD = connectionWD
				.prepareCall(&quot;{ call eis_p_calc_data_entrega( ?, ?, to_date( ?,&apos;dd/MM/yyyy&apos;), ?, ?, ? ) }&quot;);

		log.info(&apos;PP 00001.........  &apos;);
		statementWD.setString(1, codEmpresa);
		log.info(&apos;PP 00002.........  &apos;);
		statementWD.setString(2, codItem);
		log.info(&apos;PP 00003.........  &apos; + sdf.format(data));
		log.info(&apos;PP 00003.........  &apos; + sdf.format(new java.sql.Date(data)));
		log.info(&apos;PP 00003.........  &apos; + new java.sql.Date(data));
		statementWD.setDate(3, new java.sql.Date(data));
		log.info(&apos;PP 00004.........  &apos;);
		statementWD.setString(4, hora);
		log.info(&apos;PP 00005.........  &apos;);
		statementWD.setString(5, qtd_acum);

		log.info(&apos;FF 00001.........  &apos;);

		statementWD.registerOutParameter(6, java.sql.Types.DATE);
		log.info(&apos;FF 00002.........  &apos;);
		statementWD.execute();
		log.info(&apos;FF 00003.........  &apos;);

		log.info(&apos;#################&apos;);
		log.info(&apos;### 1&apos;);
		log.dir(statementWD);
		log.info(&apos;### 2&apos;);
		log.info(&quot;### aqui1: &quot; + statementWD.getDate(6)); // problema aqui
		log.info(&apos;### 3&apos;);
		log.info(&quot;### aqui2: &quot; + statementWD.getDate(6).getTime());
		log.info(&apos;#################&apos;);
		dataCalc = new Date(statementWD.getDate(6).getTime());
		// dataCalc = new Date();

		log.info(&apos;Data entrega calc!..&apos; + dataCalc);

		return dataCalc;

	} catch (e) {
		log.info(&quot;ERROOOOOO&quot; + e.getMessage());

	} finally {
		if (statementWD != null) {
			statementWD.close();
		}
		if (connectionWD != null) {
			connectionWD.close();
		}
	}
}

/*
 * var constraints = new Array(); var cod_empresa = hAPI.getCardValue( &quot;empresa&quot; );
 * var num_pedido = hAPI.getCardValue( &quot;num_pedido&quot; ); constraints.push(
 * DatasetFactory.createConstraint(&quot;cod_empresa&quot;, cod_empresa, cod_empresa,
 * ConstraintType.MUST) ); constraints.push(
 * DatasetFactory.createConstraint(&quot;num_pedido&quot;, num_pedido, num_pedido,
 * ConstraintType.MUST) ); var pedido =
 * DatasetFactory.getDataset(&quot;pedido_item_rest&quot;, null, constraints, null);
 * 
 * log.info(&apos;Pedido......&apos;+pedido);
 */
// return true;
function setComment(user, processo, comentario) {
	var constraints = new Array();
	constraints.push(DatasetFactory.createConstraint(&apos;processo&apos;, processo,
			processo, ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&apos;user&apos;, user, user,
			ConstraintType.MUST));
	constraints.push(DatasetFactory.createConstraint(&apos;comentario&apos;, comentario,
			comentario, ConstraintType.MUST));
	var dataset = DatasetFactory.getDataset(&apos;setComent&apos;, null, constraints,
			null);
	if (dataset != null) {
		return dataset.getValue(0, &apos;retorno&apos;);
	}
}
</eventDescription>
    </WorkflowProcessEvent>
  </list>
  <list>
    <AdvancedProcessProperties>
      <advancedProcessPropertiesPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <propertyId>folder_proforma</propertyId>
        <version>129</version>
      </advancedProcessPropertiesPK>
      <propertieValue>1228</propertieValue>
    </AdvancedProcessProperties>
  </list>
  <list>
    <SwimLane>
      <color>9fc1c6</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>728</positionY>
      <stateName>Controller</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>1</sequence>
      </swimLanePK>
    </SwimLane>
    <SwimLane>
      <color>c9c3ac</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>300</positionY>
      <stateName>Adm. de Vendas</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>2</sequence>
      </swimLanePK>
    </SwimLane>
    <SwimLane>
      <color>d6e0d0</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>584</positionY>
      <stateName>Gerente Nacional</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>3</sequence>
      </swimLanePK>
    </SwimLane>
    <SwimLane>
      <color>d0daae</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>440</positionY>
      <stateName>Gerente Regional</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>4</sequence>
      </swimLanePK>
    </SwimLane>
    <SwimLane>
      <color>adc9ac</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>156</positionY>
      <stateName>Fluig</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>5</sequence>
      </swimLanePK>
    </SwimLane>
    <SwimLane>
      <color>82b0b7</color>
      <height>145</height>
      <width>1301</width>
      <positionX>50</positionX>
      <positionY>13</positionY>
      <stateName>Representante</stateName>
      <type>2</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>1</version>
        <sequence>6</sequence>
      </swimLanePK>
    </SwimLane>
  </list>
  <list/>
  <list/>
  <list>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>10</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>904</positionX>
      <positionY>355</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>19</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1065</positionX>
      <positionY>293</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>19</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>1151</positionX>
      <positionY>293</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>20</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1012</positionX>
      <positionY>373</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>27</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>256</positionX>
      <positionY>563</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>27</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>376</positionX>
      <positionY>562</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>27</linkSequence>
        <bendSequence>3</bendSequence>
      </processLinkBendPK>
      <positionX>472</positionX>
      <positionY>562</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>35</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>944</positionX>
      <positionY>657</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>35</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>944</positionX>
      <positionY>87</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>39</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>473</positionX>
      <positionY>26</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>39</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>1287</positionX>
      <positionY>26</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>42</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1317</positionX>
      <positionY>375</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>44</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>589</positionX>
      <positionY>536</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>52</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1257</positionX>
      <positionY>264</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>52</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>1303</positionX>
      <positionY>264</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>55</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1091</positionX>
      <positionY>408</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>55</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>841</positionX>
      <positionY>408</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>56</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>1093</positionX>
      <positionY>411</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>56</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>943</positionX>
      <positionY>411</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>56</linkSequence>
        <bendSequence>3</bendSequence>
      </processLinkBendPK>
      <positionX>943</positionX>
      <positionY>87</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>62</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>244</positionX>
      <positionY>86</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>68</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>590</positionX>
      <positionY>807</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>71</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>149</positionX>
      <positionY>807</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>71</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>488</positionX>
      <positionY>807</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>72</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>944</positionX>
      <positionY>807</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>72</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>944</positionX>
      <positionY>407</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>72</linkSequence>
        <bendSequence>3</bendSequence>
      </processLinkBendPK>
      <positionX>842</positionX>
      <positionY>407</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>78</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>303</positionX>
      <positionY>294</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>78</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>165</positionX>
      <positionY>294</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>81</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>394</positionX>
      <positionY>289</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>81</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>303</positionX>
      <positionY>289</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>86</linkSequence>
        <bendSequence>1</bendSequence>
      </processLinkBendPK>
      <positionX>552</positionX>
      <positionY>159</positionY>
    </ProcessLinkBend>
    <ProcessLinkBend>
      <processLinkBendPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <linkSequence>86</linkSequence>
        <bendSequence>2</bendSequence>
      </processLinkBendPK>
      <positionX>143</positionX>
      <positionY>159</positionY>
    </ProcessLinkBend>
  </list>
  <list/>
  <list>
    <ExtendedPropertyField>
      <extendedPropertyFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <version>129</version>
        <stateSequence>0</stateSequence>
        <propertyName>folder_proforma</propertyName>
      </extendedPropertyFieldPK>
      <propertyType>0</propertyType>
      <propertyDescription>folder_proforma</propertyDescription>
      <propertyValue>1228</propertyValue>
      <isDefaultProperty>false</isDefaultProperty>
    </ExtendedPropertyField>
  </list>
  <list>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>data_coleta</fieldId>
      </processFormFieldPK>
      <fieldDescription>Data Coleta</fieldDescription>
      <slotId>1</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>transportadora</fieldId>
      </processFormFieldPK>
      <fieldDescription>Transportadora</fieldDescription>
      <slotId>2</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>valor_total_geral</fieldId>
      </processFormFieldPK>
      <fieldDescription>Valor Total</fieldDescription>
      <slotId>3</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>desc_medio</fieldId>
      </processFormFieldPK>
      <fieldDescription>Desc. Medio</fieldDescription>
      <slotId>4</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>empresa</fieldId>
      </processFormFieldPK>
      <fieldDescription>Empresa</fieldDescription>
      <slotId>5</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>mix_geral</fieldId>
      </processFormFieldPK>
      <fieldDescription>Mix</fieldDescription>
      <slotId>6</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>ped_cliente</fieldId>
      </processFormFieldPK>
      <fieldDescription>Num Pedido Cliente</fieldDescription>
      <slotId>7</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>razao_social</fieldId>
      </processFormFieldPK>
      <fieldDescription>Cliente</fieldDescription>
      <slotId>8</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>cod_cliente</fieldId>
      </processFormFieldPK>
      <fieldDescription>Cod Cliente</fieldDescription>
      <slotId>9</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>cod_repres</fieldId>
      </processFormFieldPK>
      <fieldDescription>Cod Repres</fieldDescription>
      <slotId>10</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>cond_pagamento</fieldId>
      </processFormFieldPK>
      <fieldDescription>Cond Pagto.</fieldDescription>
      <slotId>11</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>lista_preco</fieldId>
      </processFormFieldPK>
      <fieldDescription>Lista de Preço</fieldDescription>
      <slotId>12</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>peso_total_geral</fieldId>
      </processFormFieldPK>
      <fieldDescription>Peso Total</fieldDescription>
      <slotId>13</slotId>
    </ProcessFormField>
    <ProcessFormField>
      <processFormFieldPK>
        <companyId>1</companyId>
        <processId>inc_pedido</processId>
        <fieldId>tipo_frete</fieldId>
      </processFormFieldPK>
      <fieldDescription>Tipo Frete</fieldDescription>
      <slotId>14</slotId>
    </ProcessFormField>
  </list>
  <list>
    <ProcessStateService>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
      <version>1</version>
      <sequence>2</sequence>
      <attempts>0</attempts>
      <sucessFullMessage>Integração executada com sucesso</sucessFullMessage>
      <serviceName>logix</serviceName>
      <frequency>1</frequency>
      <frequencyType>0</frequencyType>
    </ProcessStateService>
    <ProcessStateService>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
      <version>1</version>
      <sequence>12</sequence>
      <attempts>5</attempts>
      <sucessFullMessage>Integração executada com sucesso</sucessFullMessage>
      <frequency>10</frequency>
      <frequencyType>0</frequencyType>
    </ProcessStateService>
    <ProcessStateService>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
      <version>1</version>
      <sequence>47</sequence>
      <attempts>0</attempts>
      <sucessFullMessage></sucessFullMessage>
      <frequency>1</frequency>
      <frequencyType>0</frequencyType>
    </ProcessStateService>
    <ProcessStateService>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
      <version>1</version>
      <sequence>59</sequence>
      <attempts>0</attempts>
      <sucessFullMessage>Integração executada com sucesso</sucessFullMessage>
      <frequency>1</frequency>
      <frequencyType>0</frequencyType>
    </ProcessStateService>
    <ProcessStateService>
      <companyId>1</companyId>
      <processId>inc_pedido</processId>
      <version>1</version>
      <sequence>79</sequence>
      <attempts>0</attempts>
      <sucessFullMessage>Integração executada com sucesso</sucessFullMessage>
      <frequency>1</frequency>
      <frequencyType>0</frequencyType>
    </ProcessStateService>
  </list>
  <list/>
  <list>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>inc_pedido</processId>
      <processVersion>129</processVersion>
      <stateSequence>76</stateSequence>
      <appKey>approval</appKey>
      <appField>title</appField>
      <description>Analise Frete Subsidiado</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>inc_pedido</processId>
      <processVersion>129</processVersion>
      <stateSequence>76</stateSequence>
      <appKey>approval</appKey>
      <appField>description</appField>
      <description>O valor total é de: R$ @[form:valor_total] e o %LOB gerado é de @[form:perc_lob]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>inc_pedido</processId>
      <processVersion>129</processVersion>
      <stateSequence>76</stateSequence>
      <appKey>approval</appKey>
      <appField>highlight</appField>
      <description>O valor total é de: R$ @[form:valor_total] e o %LOB gerado é de @[form:perc_lob]</description>
    </ProcessAppConfiguration>
    <ProcessAppConfiguration>
      <id>0</id>
      <tenantId>0</tenantId>
      <processId>inc_pedido</processId>
      <processVersion>129</processVersion>
      <stateSequence>76</stateSequence>
      <appKey>approval</appKey>
      <appField>approve</appField>
      <description>59</description>
    </ProcessAppConfiguration>
  </list>
  <list/>
  <list/>
</list>